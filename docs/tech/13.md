---
tags: [æŠ€æœ¯æ–‡æ¡£]
cover: '/img/154.jpg'
prev:
    link: ./12.md
    text: è®°å½•ï¼šè§£å†³ clamd è¿›ç¨‹å¸¦æ¥çš„é—®é¢˜
next: 
    link: ./14.md
    text: è®°å½•ï¼šerrorï¼šexternally-managed-environment
title: æ€ä¹ˆè·å–æ–‡ä»¶å¤¹ç»“æ„å¹¶åŒ…å«é‡Œé¢çš„æ–‡ä»¶
---

## ä¸€ã€(Window) ä½¿ç”¨ `cmd` ç»ˆç«¯ï¼Œè¾“å…¥

```
tree
```

åœ¨treeå‘½ä»¤åé¢åŠ å…¥å‚æ•° `/f` å°†ä»¥å±‚æ¬¡çš„ç»“æ„æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å¤¹åŠæ–‡ä»¶çš„åç§°

## äºŒã€(Linux) ä½¿ç”¨ `tree`

1. å®‰è£… `tree`

```
apt install tree -y
```

2. `tree` å‚æ•°è¯´æ˜

```
tree: Invalid argument -`e'.
usage: tree [-acdfghilnpqrstuvxACDFJQNSUX] [-L level [-R]] [-H  baseHREF]
        [-T title] [-o filename] [-P pattern] [-I pattern] [--gitignore]
        [--gitfile[=]file] [--matchdirs] [--metafirst] [--ignore-case]
        [--nolinks] [--hintro[=]file] [--houtro[=]file] [--inodes] [--device]
        [--sort[=]<name>] [--dirsfirst] [--filesfirst] [--filelimit #] [--si]
        [--du] [--prune] [--charset[=]X] [--timefmt[=]format] [--fromfile]
        [--fromtabfile] [--fflinks] [--info] [--infofile[=]file] [--noreport]
        [--version] [--help] [--] [directory ...]
root@cvm-3mj428j2da223:~# tree --help
usage: tree [-acdfghilnpqrstuvxACDFJQNSUX] [-L level [-R]] [-H  baseHREF]
        [-T title] [-o filename] [-P pattern] [-I pattern] [--gitignore]
        [--gitfile[=]file] [--matchdirs] [--metafirst] [--ignore-case]
        [--nolinks] [--hintro[=]file] [--houtro[=]file] [--inodes] [--device]
        [--sort[=]<name>] [--dirsfirst] [--filesfirst] [--filelimit #] [--si]
        [--du] [--prune] [--charset[=]X] [--timefmt[=]format] [--fromfile]
        [--fromtabfile] [--fflinks] [--info] [--infofile[=]file] [--noreport]
        [--version] [--help] [--] [directory ...]
  ------- Listing options -------
  -a            All files are listed.
  -d            List directories only.
  -l            Follow symbolic links like directories.
  -f            Print the full path prefix for each file.
  -x            Stay on current filesystem only.
  -L level      Descend only level directories deep.
  -R            Rerun tree when max dir level reached.
  -P pattern    List only those files that match the pattern given.
  -I pattern    Do not list files that match the given pattern.
  --gitignore   Filter by using .gitignore files.
  --gitfile X   Explicitly read gitignore file.
  --ignore-case Ignore case when pattern matching.
  --matchdirs   Include directory names in -P pattern matching.
  --metafirst   Print meta-data at the beginning of each line.
  --prune       Prune empty directories from the output.
  --info        Print information about files found in .info files.
  --infofile X  Explicitly read info file.
  --noreport    Turn off file/directory count at end of tree listing.
  --charset X   Use charset X for terminal/HTML and indentation line output.
  --filelimit # Do not descend dirs with more than # files in them.
  -o filename   Output to file instead of stdout.
  ------- File options -------
  -q            Print non-printable characters as '?'.
  -N            Print non-printable characters as is.
  -Q            Quote filenames with double quotes.
  -p            Print the protections for each file.
  -u            Displays file owner or UID number.
  -g            Displays file group owner or GID number.
  -s            Print the size in bytes of each file.
  -h            Print the size in a more human readable way.
  --si          Like -h, but use in SI units (powers of 1000).
  --du          Compute size of directories by their contents.
  -D            Print the date of last modification or (-c) status change.
  --timefmt <f> Print and format time according to the format <f>.
  -F            Appends '/', '=', '*', '@', '|' or '>' as per ls -F.
  --inodes      Print inode number of each file.
  --device      Print device ID number to which each file belongs.
  ------- Sorting options -------
  -v            Sort files alphanumerically by version.
  -t            Sort files by last modification time.
  -c            Sort files by last status change time.
  -U            Leave files unsorted.
  -r            Reverse the order of the sort.
  --dirsfirst   List directories before files (-U disables).
  --filesfirst  List files before directories (-U disables).
  --sort X      Select sort: name,version,size,mtime,ctime.
  ------- Graphics options -------
  -i            Don't print indentation lines.
  -A            Print ANSI lines graphic indentation lines.
  -S            Print with CP437 (console) graphics indentation lines.
  -n            Turn colorization off always (-C overrides).
  -C            Turn colorization on always.
  ------- XML/HTML/JSON options -------
  -X            Prints out an XML representation of the tree.
  -J            Prints out an JSON representation of the tree.
  -H baseHREF   Prints out HTML format with baseHREF as top directory.
  -T string     Replace the default HTML title and H1 header with string.
  --nolinks     Turn off hyperlinks in HTML output.
  --hintro X    Use file X as the HTML intro.
  --houtro X    Use file X as the HTML outro.
  ------- Input options -------
  --fromfile    Reads paths from files (.=stdin)
  --fromtabfile Reads trees from tab indented files (.=stdin)
  --fflinks     Process link information when using --fromfile.
  ------- Miscellaneous options -------
  --version     Print version and exit.
  --help        Print usage and this help message and exit.
  --            Options processing terminator.
```

ä¸»è¦é€‰é¡¹è§£é‡Š[^è„šæ³¨1]:

```
-aï¼šæ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼›
-Aï¼šä½¿ç”¨ASNIç»˜å›¾å­—ç¬¦æ˜¾ç¤ºæ ‘çŠ¶å›¾è€Œéä»¥ASCIIå­—ç¬¦ç»„åˆï¼›
-Cï¼šåœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ï¼Œä¾¿äºåŒºåˆ†å„ç§ç±»å‹ï¼›
-dï¼šå…ˆæ˜¯ç›®å½•åç§°è€Œéå†…å®¹ï¼›
-Dï¼šåˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ›´æ”¹æ—¶é—´ï¼›
-fï¼šåœ¨æ¯ä¸ªæ–‡ä»¶æˆ–ç›®å½•ä¹‹å‰ï¼Œæ˜¾ç¤ºå®Œæ•´çš„ç›¸å¯¹è·¯å¾„åç§°ï¼›
-Fï¼šåœ¨æ‰§è¡Œæ–‡ä»¶ï¼Œç›®å½•ï¼ŒSocketï¼Œç¬¦å·è¿æ¥ï¼Œç®¡é“åç§°åç§°ï¼Œå„è‡ªåŠ ä¸Š"*"ï¼Œ"/"ï¼Œ"@"ï¼Œ"|"å·ï¼›
-gï¼šåˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‰€å±ç¾¤ç»„åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç¾¤ç»„è¯†åˆ«ç ï¼›
-iï¼šä¸ä»¥é˜¶æ¢¯çŠ¶åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ï¼›
-lï¼š<èŒƒæœ¬æ ·å¼> ä¸æ˜¾ç¤ºç¬¦å·èŒƒæœ¬æ ·å¼çš„æ–‡ä»¶æˆ–ç›®å½•åç§°ï¼›
-lï¼šå¦‚é‡åˆ°æ€§è´¨ä¸ºç¬¦å·è¿æ¥çš„ç›®å½•ï¼Œç›´æ¥åˆ—å‡ºè¯¥è¿æ¥æ‰€æŒ‡å‘çš„åŸå§‹ç›®å½•ï¼›
-nï¼šä¸åœ¨æ–‡ä»¶å’Œç›®å½•æ¸…å•åŠ ä¸Šè‰²å½©ï¼›
-Nï¼šç›´æ¥åˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ï¼ŒåŒ…æ‹¬æ§åˆ¶å­—ç¬¦ï¼›
-pï¼šåˆ—å‡ºæƒé™æ ‡ç¤ºï¼›
-Pï¼š<èŒƒæœ¬æ ·å¼> åªæ˜¾ç¤ºç¬¦åˆèŒƒæœ¬æ ·å¼çš„æ–‡ä»¶å’Œç›®å½•åç§°ï¼›
-qï¼šç”¨â€œï¼Ÿâ€å·å–ä»£æ§åˆ¶å­—ç¬¦ï¼Œåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•åç§°ï¼›
-sï¼šåˆ—å‡ºæ–‡ä»¶å’Œç›®å½•å¤§å°ï¼›
-tï¼šç”¨æ–‡ä»¶å’Œç›®å½•çš„æ›´æ”¹æ—¶é—´æ’åºï¼›
-uï¼šåˆ—å‡ºæ–‡ä»¶æˆ–ç›®å½•çš„æ‹¥æœ‰è€…åç§°ï¼Œæ²¡æœ‰å¯¹åº”çš„åç§°æ—¶ï¼Œåˆ™æ˜¾ç¤ºç”¨æˆ·è¯†åˆ«ç ï¼›
-xï¼šå°†èŒƒå›´å±€é™åœ¨ç°è¡Œçš„æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œè‹¥æŒ‡å®šç›®å½•ä¸‹çš„æŸäº›å­ç›®å½•ï¼Œå…¶å­˜æ”¾äºå¦ä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿä¸Šï¼Œåˆ™å°†è¯¥ç›®å½•äºˆä»¥æ’é™¤åœ¨å¯»æ‰¾èŒƒå›´å¤–ã€‚
```
## ä¸‰ã€é€šè¿‡ `Python` å®ç°

è·å–ä¸€ä¸ªæ–‡ä»¶å¤¹çš„ç»“æ„å¹¶åŒ…å«é‡Œé¢çš„æ–‡ä»¶ä¿¡æ¯å¯ä»¥é€šè¿‡ç¼–ç¨‹å®ç°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªä½¿ç”¨ `Python` è·å–æ–‡ä»¶å¤¹ç»“æ„çš„ç¤ºä¾‹ï¼š

### 1. åˆæ­¥å®ç°

#### æ–¹æ³• 1ï¼šä½¿ç”¨ `os` æ¨¡å—

```python
import os

def get_folder_structure(root_folder):
    folder_structure = {}
    for root, dirs, files in os.walk(root_folder):
        # è·å–ç›¸å¯¹äºæ ¹æ–‡ä»¶å¤¹çš„è·¯å¾„
        relative_path = os.path.relpath(root, root_folder)
        if relative_path == ".":
            relative_path = root_folder
        folder_structure[relative_path] = {"dirs": dirs, "files": files}
    return folder_structure

# ç¤ºä¾‹ï¼šè·å–å½“å‰ç›®å½•çš„ç»“æ„
root_dir = "ä½ çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„"
structure = get_folder_structure(root_dir)

# æ‰“å°ç»“æœ
import pprint
pprint.pprint(structure)
```

#### æ–¹æ³• 2ï¼šä½¿ç”¨ `pathlib` æ¨¡å—ï¼ˆPython 3.5+ï¼‰

```python
from pathlib import Path

def get_folder_structure_v2(root_folder):
    root_path = Path(root_folder)
    folder_structure = {}
    
    for path in root_path.rglob('*'):
        relative_path = path.relative_to(root_path).parent
        folder_key = str(relative_path) if relative_path != Path('.') else str(root_path)
        if folder_key not in folder_structure:
            folder_structure[folder_key] = {"dirs": [], "files": []}
        if path.is_dir():
            folder_structure[folder_key]["dirs"].append(path.name)
        else:
            folder_structure[folder_key]["files"].append(path.name)
    return folder_structure

# ç¤ºä¾‹ï¼šè·å–å½“å‰ç›®å½•çš„ç»“æ„
root_dir = "ä½ çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„"
structure = get_folder_structure_v2(root_dir)

# æ‰“å°ç»“æœ
import pprint
pprint.pprint(structure)
```

#### è¾“å‡ºç¤ºä¾‹
å‡è®¾æ–‡ä»¶å¤¹ç»“æ„å¦‚ä¸‹ï¼š

```
example_folder/
â”œâ”€â”€ file1.txt
â”œâ”€â”€ file2.txt
â””â”€â”€ subfolder/
    â””â”€â”€ file3.txt
```

ç¨‹åºè¾“å‡ºï¼š

```python
{
    'example_folder': {
        'dirs': ['subfolder'],
        'files': ['file1.txt', 'file2.txt']
    },
    'example_folder/subfolder': {
        'dirs': [],
        'files': ['file3.txt']
    }
}
```

#### ä¿å­˜ä¸ºæ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
å¦‚æœéœ€è¦å°†ç»“æ„ä¿å­˜åˆ° JSON æ–‡ä»¶ä¸­ï¼Œå¯ä»¥ç”¨ä»¥ä¸‹ä»£ç ï¼š

```python
import json

with open("folder_structure.json", "w", encoding="utf-8") as f:
    json.dump(structure, f, ensure_ascii=False, indent=4)
```


### 2. è¾“å‡ºæ ‘çŠ¶å›¾

å½“ç„¶å¯ä»¥è¾“å‡ºæ ‘çŠ¶å›¾ï¼å¯ä»¥ç”¨ Python å®ç°ä¸€ä¸ªç®€å•çš„æ ‘çŠ¶å›¾ç»“æ„æ¥å±•ç¤ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯ç¤ºä¾‹ä»£ç ï¼š

#### æ–¹æ³•ï¼šä½¿ç”¨é€’å½’è¾“å‡ºæ ‘çŠ¶å›¾

```python
import os

def print_tree(folder_path, indent=""):
    items = os.listdir(folder_path)
    for index, item in enumerate(items):
        item_path = os.path.join(folder_path, item)
        is_last = index == len(items) - 1
        # ä½¿ç”¨ä¸åŒç¬¦å·è¡¨ç¤ºæ–‡ä»¶å’Œæ–‡ä»¶å¤¹
        prefix = "â””â”€â”€ " if is_last else "â”œâ”€â”€ "
        print(indent + prefix + item)
        # å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œé€’å½’è°ƒç”¨
        if os.path.isdir(item_path):
            new_indent = indent + ("    " if is_last else "â”‚   ")
            print_tree(item_path, new_indent)

# ç¤ºä¾‹ï¼šæ‰“å°å½“å‰ç›®å½•çš„æ ‘çŠ¶ç»“æ„
root_dir = "ä½ çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„"
print(f"{root_dir}/")
print_tree(root_dir)
```

#### ç¤ºä¾‹è¾“å‡º
å‡è®¾ç›®æ ‡æ–‡ä»¶å¤¹ç»“æ„ä¸ºï¼š

```
example_folder/
â”œâ”€â”€ file1.txt
â”œâ”€â”€ file2.txt
â””â”€â”€ subfolder/
    â”œâ”€â”€ file3.txt
    â””â”€â”€ subsubfolder/
        â””â”€â”€ file4.txt
```

è¿è¡Œä»£ç åä¼šè¾“å‡ºï¼š

```
example_folder/
â”œâ”€â”€ file1.txt
â”œâ”€â”€ file2.txt
â””â”€â”€ subfolder/
    â”œâ”€â”€ file3.txt
    â””â”€â”€ subsubfolder/
        â””â”€â”€ file4.txt
```

#### ä¼˜åŒ–ï¼šç”¨ `rich` åº“å®ç°é«˜äº®æ ‘çŠ¶å›¾ï¼ˆæ¨èï¼‰

`rich` æ˜¯ä¸€ä¸ªå¼ºå¤§çš„åº“ï¼Œå¯ä»¥è½»æ¾å®ç°ç¾è§‚çš„æ ‘çŠ¶ç»“æ„è¾“å‡ºã€‚

##### å®‰è£… `rich`ï¼š

```bash
pip install rich
```

##### ä½¿ç”¨ `rich` è¾“å‡ºæ ‘çŠ¶å›¾ï¼š

```python
from rich.tree import Tree
from rich.console import Console
import os

def build_tree(folder_path, tree):
    for item in os.listdir(folder_path):
        item_path = os.path.join(folder_path, item)
        if os.path.isdir(item_path):
            branch = tree.add(item)
            build_tree(item_path, branch)
        else:
            tree.add(item)

def print_tree_with_rich(folder_path):
    console = Console()
    tree = Tree(folder_path)
    build_tree(folder_path, tree)
    console.print(tree)

# ç¤ºä¾‹ï¼šæ‰“å°ç›®æ ‡æ–‡ä»¶å¤¹çš„æ ‘çŠ¶ç»“æ„
root_dir = "ä½ çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„"
print_tree_with_rich(root_dir)
```

##### ç¤ºä¾‹è¾“å‡ºï¼ˆå¸¦é¢œè‰²ï¼‰ï¼š

```
example_folder
â”œâ”€â”€ file1.txt
â”œâ”€â”€ file2.txt
â””â”€â”€ subfolder
    â”œâ”€â”€ file3.txt
    â””â”€â”€ subsubfolder
        â””â”€â”€ file4.txt
```

#### æ€»ç»“
1. **æ™®é€šç‰ˆæœ¬**ï¼šä½¿ç”¨ `os` æ¨¡å—é€’å½’è¾“å‡ºç®€å•çš„æ ‘çŠ¶å›¾ã€‚
2. **å¢å¼ºç‰ˆæœ¬**ï¼šç”¨ `rich` åº“è¾“å‡ºæ›´ç¾è§‚çš„é«˜äº®æ ‘çŠ¶å›¾ã€‚

### 3. æ”¹è¿›ä»£ç ï¼Œä½¿å…¶é€‰æ‹©æ€§è¾“å‡º

è¦å®ç°é€‰æ‹©æ€§è¾“å‡ºæ–‡ä»¶å¤¹å’Œæ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šè§„åˆ™è¿‡æ»¤æŸäº›æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ã€‚ä»¥ä¸‹æ˜¯å®ç°æ–¹æ³•ï¼š

---

#### **æ”¹è¿›ä»£ç ï¼šæ™®é€šæ ‘çŠ¶å›¾ï¼ˆæ’é™¤æŒ‡å®šæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ï¼‰**

```python
import os

def print_tree(folder_path, indent="", exclude_dirs=None, exclude_files=None):
    """
    æ‰“å°æ–‡ä»¶å¤¹æ ‘çŠ¶å›¾ï¼Œå¹¶æ”¯æŒæ’é™¤ç‰¹å®šæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ã€‚
    
    :param folder_path: ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„
    :param indent: ç¼©è¿›ï¼Œç”¨äºé€’å½’
    :param exclude_dirs: è¦æ’é™¤çš„æ–‡ä»¶å¤¹åˆ—è¡¨
    :param exclude_files: è¦æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
    """
    exclude_dirs = exclude_dirs or []
    exclude_files = exclude_files or []
    
    items = os.listdir(folder_path)
    items.sort()  # æŒ‰åç§°æ’åºï¼Œæ–¹ä¾¿æŸ¥çœ‹
    for index, item in enumerate(items):
        item_path = os.path.join(folder_path, item)
        
        # è·³è¿‡æŒ‡å®šçš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶
        if os.path.isdir(item_path) and item in exclude_dirs:
            continue
        if os.path.isfile(item_path) and item in exclude_files:
            continue
        
        # åˆ¤æ–­æ˜¯å¦æ˜¯æœ€åä¸€ä¸ªå…ƒç´ 
        is_last = index == len(items) - 1
        prefix = "â””â”€â”€ " if is_last else "â”œâ”€â”€ "
        print(indent + prefix + item)
        
        # å¦‚æœæ˜¯æ–‡ä»¶å¤¹ï¼Œé€’å½’è°ƒç”¨
        if os.path.isdir(item_path):
            new_indent = indent + ("    " if is_last else "â”‚   ")
            print_tree(item_path, new_indent, exclude_dirs, exclude_files)

# ç¤ºä¾‹ï¼šæ‰“å°æ ‘çŠ¶ç»“æ„ï¼Œæ’é™¤ç‰¹å®šæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶
root_dir = "ä½ çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„"
exclude_dirs = ["li"]  # æ’é™¤çš„æ–‡ä»¶å¤¹
exclude_files = []     # æ’é™¤çš„æ–‡ä»¶
print(f"{root_dir}/")
print_tree(root_dir, exclude_dirs=exclude_dirs, exclude_files=exclude_files)
```

---

#### **å¢å¼ºç‰ˆï¼šå¸¦ `rich` çš„é«˜äº®æ ‘çŠ¶å›¾ï¼ˆæ”¯æŒæ’é™¤è§„åˆ™ï¼‰**

##### æ–¹æ³•ï¼š
æˆ‘ä»¬å¯ä»¥åœ¨æ„å»ºæ ‘çš„æ—¶å€™ï¼Œåˆ¤æ–­å½“å‰èŠ‚ç‚¹æ˜¯å¦åœ¨æ’é™¤è§„åˆ™ä¸­ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è·³è¿‡ã€‚

```python
from rich.tree import Tree
from rich.console import Console
import os

def build_tree_with_exclude(folder_path, tree, exclude_dirs=None, exclude_files=None):
    """
    æ„å»ºæ–‡ä»¶å¤¹æ ‘çŠ¶å›¾ï¼Œå¹¶æ”¯æŒæ’é™¤ç‰¹å®šæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ã€‚
    
    :param folder_path: ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„
    :param tree: rich çš„æ ‘èŠ‚ç‚¹
    :param exclude_dirs: è¦æ’é™¤çš„æ–‡ä»¶å¤¹åˆ—è¡¨
    :param exclude_files: è¦æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
    """
    exclude_dirs = exclude_dirs or []
    exclude_files = exclude_files or []
    
    items = os.listdir(folder_path)
    items.sort()  # æŒ‰åç§°æ’åºï¼Œæ–¹ä¾¿æŸ¥çœ‹
    for item in items:
        item_path = os.path.join(folder_path, item)
        
        # è·³è¿‡æŒ‡å®šçš„æ–‡ä»¶å¤¹æˆ–æ–‡ä»¶
        if os.path.isdir(item_path) and item in exclude_dirs:
            continue
        if os.path.isfile(item_path) and item in exclude_files:
            continue
        
        if os.path.isdir(item_path):
            branch = tree.add(f"ğŸ“‚ {item}")
            build_tree_with_exclude(item_path, branch, exclude_dirs, exclude_files)
        else:
            tree.add(f"ğŸ“„ {item}")

def print_tree_with_rich_and_exclude(folder_path, exclude_dirs=None, exclude_files=None):
    """
    æ‰“å°æ–‡ä»¶å¤¹æ ‘çŠ¶å›¾ï¼ˆå¸¦é«˜äº®ï¼‰ï¼Œæ”¯æŒæ’é™¤ç‰¹å®šæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶ã€‚
    
    :param folder_path: ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„
    :param exclude_dirs: è¦æ’é™¤çš„æ–‡ä»¶å¤¹åˆ—è¡¨
    :param exclude_files: è¦æ’é™¤çš„æ–‡ä»¶åˆ—è¡¨
    """
    console = Console()
    tree = Tree(f"[bold magenta]{folder_path}[/bold magenta]")
    build_tree_with_exclude(folder_path, tree, exclude_dirs, exclude_files)
    console.print(tree)

# ç¤ºä¾‹ï¼šæ‰“å°æ ‘çŠ¶ç»“æ„ï¼Œæ’é™¤ç‰¹å®šæ–‡ä»¶å¤¹æˆ–æ–‡ä»¶
root_dir = "ä½ çš„ç›®æ ‡æ–‡ä»¶å¤¹è·¯å¾„"
exclude_dirs = ["li"]  # æ’é™¤çš„æ–‡ä»¶å¤¹
exclude_files = ["file1.txt"]  # æ’é™¤çš„æ–‡ä»¶
print_tree_with_rich_and_exclude(root_dir, exclude_dirs, exclude_files)
```

---

#### ç¤ºä¾‹

##### å‡è®¾ç›®å½•ç»“æ„ï¼š

```
example_folder/
â”œâ”€â”€ file1.txt
â”œâ”€â”€ file2.txt
â”œâ”€â”€ ex/
â”‚   â”œâ”€â”€ file3.txt
â”‚   â””â”€â”€ li/
â”‚       â””â”€â”€ file4.txt
â””â”€â”€ other/
    â””â”€â”€ file5.txt
```

##### è¿è¡Œæ’é™¤è§„åˆ™ï¼š

```python
exclude_dirs = ["li"]
exclude_files = ["file1.txt"]
```

##### æ™®é€šè¾“å‡ºï¼š

```
example_folder/
â”œâ”€â”€ file2.txt
â”œâ”€â”€ ex/
â”‚   â””â”€â”€ file3.txt
â””â”€â”€ other/
    â””â”€â”€ file5.txt
```

##### Rich è¾“å‡ºï¼ˆå¸¦é«˜äº®ï¼‰ï¼š

```
ğŸ“‚ example_folder
â”œâ”€â”€ ğŸ“„ file2.txt
â”œâ”€â”€ ğŸ“‚ ex
â”‚   â””â”€â”€ ğŸ“„ file3.txt
â””â”€â”€ ğŸ“‚ other
    â””â”€â”€ ğŸ“„ file5.txt
```

---

#### å¯æ‰©å±•æ€§
å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ `exclude_dirs` å’Œ `exclude_files` åˆ—è¡¨ï¼Œçµæ´»æ§åˆ¶è¦æ’é™¤çš„å†…å®¹ã€‚æ˜¯å¦å¾ˆæ–¹ä¾¿å‘¢ï¼Ÿ ğŸ‰



[^è„šæ³¨1]:  `ä¸»è¦é€‰é¡¹è§£é‡Š` **è¯¥éƒ¨åˆ†** è½¬è‡ª [CSDN](https://blog.csdn.net/fsx2550553488/article/details/80317474)çš„ä¸€ç¯‡æ–‡ç« ï¼Œ
**ç‰ˆæƒå£°æ˜**ï¼šå·²æŒ‰ç…§è¦æ±‚éµå¾ª CC 4.0 BY-SA ç‰ˆæƒåè®®ï¼Œè¯¥è½¬è½½å·²é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥å’Œæœ¬å£°æ˜ã€‚


