"use strict";var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=function(t){return t&&t.Math===Math&&t},n=e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)||e("object"==typeof t&&t)||e("object"==typeof t&&t)||function(){return this}()||Function("return this")(),r={},o=function(t){try{return!!t()}catch(t){return!0}},i=!o((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),a=!o((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),s=a,c=Function.prototype.call,l=s?c.bind(c):function(){return c.apply(c,arguments)},u={},d={}.propertyIsEnumerable,h=Object.getOwnPropertyDescriptor,f=h&&!d.call({1:2},1);u.f=f?function(t){var e=h(this,t);return!!e&&e.enumerable}:d;var p,v,y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},m=a,g=Function.prototype,w=g.call,b=m&&g.bind.bind(w,w),x=m?b:function(t){return function(){return w.apply(t,arguments)}},S=x,O=S({}.toString),P=S("".slice),E=function(t){return P(O(t),8,-1)},T=o,k=E,C=Object,A=x("".split),j=T((function(){return!C("z").propertyIsEnumerable(0)}))?function(t){return"String"===k(t)?A(t,""):C(t)}:C,R=function(t){return null==t},_=R,L=TypeError,D=function(t){if(_(t))throw new L("Can't call method on "+t);return t},I=j,B=D,H=function(t){return I(B(t))},N="object"==typeof document&&document.all,W=void 0===N&&void 0!==N?function(t){return"function"==typeof t||t===N}:function(t){return"function"==typeof t},U=W,F=function(t){return"object"==typeof t?null!==t:U(t)},M=n,G=W,q=function(t,e){return arguments.length<2?(n=M[t],G(n)?n:void 0):M[t]&&M[t][e];var n},z=x({}.isPrototypeOf),V=n.navigator,X=V&&V.userAgent,Y=X?String(X):"",$=n,K=Y,J=$.process,Z=$.Deno,Q=J&&J.versions||Z&&Z.version,tt=Q&&Q.v8;tt&&(v=(p=tt.split("."))[0]>0&&p[0]<4?1:+(p[0]+p[1])),!v&&K&&(!(p=K.match(/Edge\/(\d+)/))||p[1]>=74)&&(p=K.match(/Chrome\/(\d+)/))&&(v=+p[1]);var et=v,nt=et,rt=o,ot=n.String,it=!!Object.getOwnPropertySymbols&&!rt((function(){var t=Symbol("symbol detection");return!ot(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&nt&&nt<41})),at=it&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,st=q,ct=W,lt=z,ut=Object,dt=at?function(t){return"symbol"==typeof t}:function(t){var e=st("Symbol");return ct(e)&&lt(e.prototype,ut(t))},ht=String,ft=function(t){try{return ht(t)}catch(t){return"Object"}},pt=W,vt=ft,yt=TypeError,mt=function(t){if(pt(t))return t;throw new yt(vt(t)+" is not a function")},gt=mt,wt=R,bt=function(t,e){var n=t[e];return wt(n)?void 0:gt(n)},xt=l,St=W,Ot=F,Pt=TypeError,Et={exports:{}},Tt=n,kt=Object.defineProperty,Ct=function(t,e){try{kt(Tt,t,{value:e,configurable:!0,writable:!0})}catch(n){Tt[t]=e}return e},At=n,jt=Ct,Rt="__core-js_shared__",_t=Et.exports=At[Rt]||jt(Rt,{});(_t.versions||(_t.versions=[])).push({version:"3.38.1",mode:"global",copyright:"Â© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Lt=Et.exports,Dt=Lt,It=function(t,e){return Dt[t]||(Dt[t]=e||{})},Bt=D,Ht=Object,Nt=function(t){return Ht(Bt(t))},Wt=Nt,Ut=x({}.hasOwnProperty),Ft=Object.hasOwn||function(t,e){return Ut(Wt(t),e)},Mt=x,Gt=0,qt=Math.random(),zt=Mt(1..toString),Vt=function(t){return"Symbol("+(void 0===t?"":t)+")_"+zt(++Gt+qt,36)},Xt=It,Yt=Ft,$t=Vt,Kt=it,Jt=at,Zt=n.Symbol,Qt=Xt("wks"),te=Jt?Zt.for||Zt:Zt&&Zt.withoutSetter||$t,ee=function(t){return Yt(Qt,t)||(Qt[t]=Kt&&Yt(Zt,t)?Zt[t]:te("Symbol."+t)),Qt[t]},ne=l,re=F,oe=dt,ie=bt,ae=function(t,e){var n,r;if("string"===e&&St(n=t.toString)&&!Ot(r=xt(n,t)))return r;if(St(n=t.valueOf)&&!Ot(r=xt(n,t)))return r;if("string"!==e&&St(n=t.toString)&&!Ot(r=xt(n,t)))return r;throw new Pt("Can't convert object to primitive value")},se=TypeError,ce=ee("toPrimitive"),le=function(t,e){if(!re(t)||oe(t))return t;var n,r=ie(t,ce);if(r){if(void 0===e&&(e="default"),n=ne(r,t,e),!re(n)||oe(n))return n;throw new se("Can't convert object to primitive value")}return void 0===e&&(e="number"),ae(t,e)},ue=dt,de=function(t){var e=le(t,"string");return ue(e)?e:e+""},he=F,fe=n.document,pe=he(fe)&&he(fe.createElement),ve=function(t){return pe?fe.createElement(t):{}},ye=ve,me=!i&&!o((function(){return 7!==Object.defineProperty(ye("div"),"a",{get:function(){return 7}}).a})),ge=i,we=l,be=u,xe=y,Se=H,Oe=de,Pe=Ft,Ee=me,Te=Object.getOwnPropertyDescriptor;r.f=ge?Te:function(t,e){if(t=Se(t),e=Oe(e),Ee)try{return Te(t,e)}catch(t){}if(Pe(t,e))return xe(!we(be.f,t,e),t[e])};var ke={},Ce=i&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),Ae=F,je=String,Re=TypeError,_e=function(t){if(Ae(t))return t;throw new Re(je(t)+" is not an object")},Le=i,De=me,Ie=Ce,Be=_e,He=de,Ne=TypeError,We=Object.defineProperty,Ue=Object.getOwnPropertyDescriptor,Fe="enumerable",Me="configurable",Ge="writable";ke.f=Le?Ie?function(t,e,n){if(Be(t),e=He(e),Be(n),"function"==typeof t&&"prototype"===e&&"value"in n&&Ge in n&&!n[Ge]){var r=Ue(t,e);r&&r[Ge]&&(t[e]=n.value,n={configurable:Me in n?n[Me]:r[Me],enumerable:Fe in n?n[Fe]:r[Fe],writable:!1})}return We(t,e,n)}:We:function(t,e,n){if(Be(t),e=He(e),Be(n),De)try{return We(t,e,n)}catch(t){}if("get"in n||"set"in n)throw new Ne("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var qe=ke,ze=y,Ve=i?function(t,e,n){return qe.f(t,e,ze(1,n))}:function(t,e,n){return t[e]=n,t},Xe={exports:{}},Ye=i,$e=Ft,Ke=Function.prototype,Je=Ye&&Object.getOwnPropertyDescriptor,Ze=$e(Ke,"name"),Qe={EXISTS:Ze,PROPER:Ze&&"something"===function(){}.name,CONFIGURABLE:Ze&&(!Ye||Ye&&Je(Ke,"name").configurable)},tn=W,en=Lt,nn=x(Function.toString);tn(en.inspectSource)||(en.inspectSource=function(t){return nn(t)});var rn,on,an,sn=en.inspectSource,cn=W,ln=n.WeakMap,un=cn(ln)&&/native code/.test(String(ln)),dn=Vt,hn=It("keys"),fn=function(t){return hn[t]||(hn[t]=dn(t))},pn={},vn=un,yn=n,mn=F,gn=Ve,wn=Ft,bn=Lt,xn=fn,Sn=pn,On="Object already initialized",Pn=yn.TypeError,En=yn.WeakMap;if(vn||bn.state){var Tn=bn.state||(bn.state=new En);Tn.get=Tn.get,Tn.has=Tn.has,Tn.set=Tn.set,rn=function(t,e){if(Tn.has(t))throw new Pn(On);return e.facade=t,Tn.set(t,e),e},on=function(t){return Tn.get(t)||{}},an=function(t){return Tn.has(t)}}else{var kn=xn("state");Sn[kn]=!0,rn=function(t,e){if(wn(t,kn))throw new Pn(On);return e.facade=t,gn(t,kn,e),e},on=function(t){return wn(t,kn)?t[kn]:{}},an=function(t){return wn(t,kn)}}var Cn={set:rn,get:on,has:an,enforce:function(t){return an(t)?on(t):rn(t,{})},getterFor:function(t){return function(e){var n;if(!mn(e)||(n=on(e)).type!==t)throw new Pn("Incompatible receiver, "+t+" required");return n}}},An=x,jn=o,Rn=W,_n=Ft,Ln=i,Dn=Qe.CONFIGURABLE,In=sn,Bn=Cn.enforce,Hn=Cn.get,Nn=String,Wn=Object.defineProperty,Un=An("".slice),Fn=An("".replace),Mn=An([].join),Gn=Ln&&!jn((function(){return 8!==Wn((function(){}),"length",{value:8}).length})),qn=String(String).split("String"),zn=Xe.exports=function(t,e,n){"Symbol("===Un(Nn(e),0,7)&&(e="["+Fn(Nn(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!_n(t,"name")||Dn&&t.name!==e)&&(Ln?Wn(t,"name",{value:e,configurable:!0}):t.name=e),Gn&&n&&_n(n,"arity")&&t.length!==n.arity&&Wn(t,"length",{value:n.arity});try{n&&_n(n,"constructor")&&n.constructor?Ln&&Wn(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var r=Bn(t);return _n(r,"source")||(r.source=Mn(qn,"string"==typeof e?e:"")),t};Function.prototype.toString=zn((function(){return Rn(this)&&Hn(this).source||In(this)}),"toString");var Vn=Xe.exports,Xn=W,Yn=ke,$n=Vn,Kn=Ct,Jn=function(t,e,n,r){r||(r={});var o=r.enumerable,i=void 0!==r.name?r.name:e;if(Xn(n)&&$n(n,i,r),r.global)o?t[e]=n:Kn(e,n);else{try{r.unsafe?t[e]&&(o=!0):delete t[e]}catch(t){}o?t[e]=n:Yn.f(t,e,{value:n,enumerable:!1,configurable:!r.nonConfigurable,writable:!r.nonWritable})}return t},Zn={},Qn=Math.ceil,tr=Math.floor,er=Math.trunc||function(t){var e=+t;return(e>0?tr:Qn)(e)},nr=function(t){var e=+t;return e!=e||0===e?0:er(e)},rr=nr,or=Math.max,ir=Math.min,ar=function(t,e){var n=rr(t);return n<0?or(n+e,0):ir(n,e)},sr=nr,cr=Math.min,lr=function(t){var e=sr(t);return e>0?cr(e,9007199254740991):0},ur=function(t){return lr(t.length)},dr=H,hr=ar,fr=ur,pr=function(t){return function(e,n,r){var o=dr(e),i=fr(o);if(0===i)return!t&&-1;var a,s=hr(r,i);if(t&&n!=n){for(;i>s;)if((a=o[s++])!=a)return!0}else for(;i>s;s++)if((t||s in o)&&o[s]===n)return t||s||0;return!t&&-1}},vr={includes:pr(!0),indexOf:pr(!1)},yr=Ft,mr=H,gr=vr.indexOf,wr=pn,br=x([].push),xr=function(t,e){var n,r=mr(t),o=0,i=[];for(n in r)!yr(wr,n)&&yr(r,n)&&br(i,n);for(;e.length>o;)yr(r,n=e[o++])&&(~gr(i,n)||br(i,n));return i},Sr=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Or=xr,Pr=Sr.concat("length","prototype");Zn.f=Object.getOwnPropertyNames||function(t){return Or(t,Pr)};var Er={};Er.f=Object.getOwnPropertySymbols;var Tr=q,kr=Zn,Cr=Er,Ar=_e,jr=x([].concat),Rr=Tr("Reflect","ownKeys")||function(t){var e=kr.f(Ar(t)),n=Cr.f;return n?jr(e,n(t)):e},_r=Ft,Lr=Rr,Dr=r,Ir=ke,Br=o,Hr=W,Nr=/#|\.prototype\./,Wr=function(t,e){var n=Fr[Ur(t)];return n===Gr||n!==Mr&&(Hr(e)?Br(e):!!e)},Ur=Wr.normalize=function(t){return String(t).replace(Nr,".").toLowerCase()},Fr=Wr.data={},Mr=Wr.NATIVE="N",Gr=Wr.POLYFILL="P",qr=Wr,zr=n,Vr=r.f,Xr=Ve,Yr=Jn,$r=Ct,Kr=function(t,e,n){for(var r=Lr(e),o=Ir.f,i=Dr.f,a=0;a<r.length;a++){var s=r[a];_r(t,s)||n&&_r(n,s)||o(t,s,i(e,s))}},Jr=qr,Zr=function(t,e){var n,r,o,i,a,s=t.target,c=t.global,l=t.stat;if(n=c?zr:l?zr[s]||$r(s,{}):zr[s]&&zr[s].prototype)for(r in e){if(i=e[r],o=t.dontCallGetSet?(a=Vr(n,r))&&a.value:n[r],!Jr(c?r:s+(l?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;Kr(i,o)}(t.sham||o&&o.sham)&&Xr(i,"sham",!0),Yr(n,r,i,t)}},Qr=E,to=x,eo=function(t){if("Function"===Qr(t))return to(t)},no=mt,ro=a,oo=eo(eo.bind),io=function(t,e){return no(t),void 0===e?t:ro?oo(t,e):function(){return t.apply(e,arguments)}},ao=l,so=_e,co=bt,lo=function(t,e,n){var r,o;so(t);try{if(!(r=co(t,"return"))){if("throw"===e)throw n;return n}r=ao(r,t)}catch(t){o=!0,r=t}if("throw"===e)throw n;if(o)throw r;return so(r),n},uo=_e,ho=lo,fo={},po=fo,vo=ee("iterator"),yo=Array.prototype,mo=function(t){return void 0!==t&&(po.Array===t||yo[vo]===t)},go={};go[ee("toStringTag")]="z";var wo="[object z]"===String(go),bo=W,xo=E,So=ee("toStringTag"),Oo=Object,Po="Arguments"===xo(function(){return arguments}()),Eo=wo?xo:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Oo(t),So))?n:Po?xo(e):"Object"===(r=xo(e))&&bo(e.callee)?"Arguments":r},To=x,ko=o,Co=W,Ao=Eo,jo=sn,Ro=function(){},_o=q("Reflect","construct"),Lo=/^\s*(?:class|function)\b/,Do=To(Lo.exec),Io=!Lo.test(Ro),Bo=function(t){if(!Co(t))return!1;try{return _o(Ro,[],t),!0}catch(t){return!1}},Ho=function(t){if(!Co(t))return!1;switch(Ao(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Io||!!Do(Lo,jo(t))}catch(t){return!0}};Ho.sham=!0;var No=!_o||ko((function(){var t;return Bo(Bo.call)||!Bo(Object)||!Bo((function(){t=!0}))||t}))?Ho:Bo,Wo=i,Uo=ke,Fo=y,Mo=Eo,Go=bt,qo=R,zo=fo,Vo=ee("iterator"),Xo=function(t){if(!qo(t))return Go(t,Vo)||Go(t,"@@iterator")||zo[Mo(t)]},Yo=l,$o=mt,Ko=_e,Jo=ft,Zo=Xo,Qo=TypeError,ti=function(t,e){var n=arguments.length<2?Zo(t):e;if($o(n))return Ko(Yo(n,t));throw new Qo(Jo(t)+" is not iterable")},ei=io,ni=l,ri=Nt,oi=function(t,e,n,r){try{return r?e(uo(n)[0],n[1]):e(n)}catch(e){ho(t,"throw",e)}},ii=mo,ai=No,si=ur,ci=function(t,e,n){Wo?Uo.f(t,e,Fo(0,n)):t[e]=n},li=ti,ui=Xo,di=Array,hi=ee("iterator"),fi=!1;try{var pi=0,vi={next:function(){return{done:!!pi++}},return:function(){fi=!0}};vi[hi]=function(){return this},Array.from(vi,(function(){throw 2}))}catch(t){}var yi=function(t,e){try{if(!e&&!fi)return!1}catch(t){return!1}var n=!1;try{var r={};r[hi]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},mi=function(t){var e=ri(t),n=ai(this),r=arguments.length,o=r>1?arguments[1]:void 0,i=void 0!==o;i&&(o=ei(o,r>2?arguments[2]:void 0));var a,s,c,l,u,d,h=ui(e),f=0;if(!h||this===di&&ii(h))for(a=si(e),s=n?new this(a):di(a);a>f;f++)d=i?o(e[f],f):e[f],ci(s,f,d);else for(s=n?new this:[],u=(l=li(e,h)).next;!(c=ni(u,l)).done;f++)d=i?oi(l,o,[c.value,f],!0):c.value,ci(s,f,d);return s.length=f,s};Zr({target:"Array",stat:!0,forced:!yi((function(t){Array.from(t)}))},{from:mi});var gi,wi,bi,xi,Si=n,Oi=Y,Pi=E,Ei=function(t){return Oi.slice(0,t.length)===t},Ti=Ei("Bun/")?"BUN":Ei("Cloudflare-Workers")?"CLOUDFLARE":Ei("Deno/")?"DENO":Ei("Node.js/")?"NODE":Si.Bun&&"string"==typeof Bun.version?"BUN":Si.Deno&&"object"==typeof Deno.version?"DENO":"process"===Pi(Si.process)?"NODE":Si.window&&Si.document?"BROWSER":"REST",ki="NODE"===Ti,Ci=x,Ai=mt,ji=F,Ri=function(t){return ji(t)||null===t},_i=String,Li=TypeError,Di=function(t,e,n){try{return Ci(Ai(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(t){}},Ii=F,Bi=D,Hi=function(t){if(Ri(t))return t;throw new Li("Can't set "+_i(t)+" as a prototype")},Ni=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Di(Object.prototype,"__proto__","set"))(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return Bi(n),Hi(r),Ii(n)?(e?t(n,r):n.__proto__=r,n):n}}():void 0),Wi=ke.f,Ui=Ft,Fi=ee("toStringTag"),Mi=Vn,Gi=ke,qi=q,zi=function(t,e,n){return n.get&&Mi(n.get,e,{getter:!0}),n.set&&Mi(n.set,e,{setter:!0}),Gi.f(t,e,n)},Vi=i,Xi=ee("species"),Yi=z,$i=TypeError,Ki=No,Ji=ft,Zi=TypeError,Qi=_e,ta=function(t){if(Ki(t))return t;throw new Zi(Ji(t)+" is not a constructor")},ea=R,na=ee("species"),ra=a,oa=Function.prototype,ia=oa.apply,aa=oa.call,sa="object"==typeof Reflect&&Reflect.apply||(ra?aa.bind(ia):function(){return aa.apply(ia,arguments)}),ca=q("document","documentElement"),la=x([].slice),ua=TypeError,da=/(?:ipad|iphone|ipod).*applewebkit/i.test(Y),ha=n,fa=sa,pa=io,va=W,ya=Ft,ma=o,ga=ca,wa=la,ba=ve,xa=function(t,e){if(t<e)throw new ua("Not enough arguments");return t},Sa=da,Oa=ki,Pa=ha.setImmediate,Ea=ha.clearImmediate,Ta=ha.process,ka=ha.Dispatch,Ca=ha.Function,Aa=ha.MessageChannel,ja=ha.String,Ra=0,_a={},La="onreadystatechange";ma((function(){gi=ha.location}));var Da=function(t){if(ya(_a,t)){var e=_a[t];delete _a[t],e()}},Ia=function(t){return function(){Da(t)}},Ba=function(t){Da(t.data)},Ha=function(t){ha.postMessage(ja(t),gi.protocol+"//"+gi.host)};Pa&&Ea||(Pa=function(t){xa(arguments.length,1);var e=va(t)?t:Ca(t),n=wa(arguments,1);return _a[++Ra]=function(){fa(e,void 0,n)},wi(Ra),Ra},Ea=function(t){delete _a[t]},Oa?wi=function(t){Ta.nextTick(Ia(t))}:ka&&ka.now?wi=function(t){ka.now(Ia(t))}:Aa&&!Sa?(xi=(bi=new Aa).port2,bi.port1.onmessage=Ba,wi=pa(xi.postMessage,xi)):ha.addEventListener&&va(ha.postMessage)&&!ha.importScripts&&gi&&"file:"!==gi.protocol&&!ma(Ha)?(wi=Ha,ha.addEventListener("message",Ba,!1)):wi=La in ba("script")?function(t){ga.appendChild(ba("script"))[La]=function(){ga.removeChild(this),Da(t)}}:function(t){setTimeout(Ia(t),0)});var Na={set:Pa,clear:Ea},Wa=n,Ua=i,Fa=Object.getOwnPropertyDescriptor,Ma=function(){this.head=null,this.tail=null};Ma.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var Ga,qa,za,Va,Xa,Ya=Ma,$a=/ipad|iphone|ipod/i.test(Y)&&"undefined"!=typeof Pebble,Ka=/web0s(?!.*chrome)/i.test(Y),Ja=n,Za=function(t){if(!Ua)return Wa[t];var e=Fa(Wa,t);return e&&e.value},Qa=io,ts=Na.set,es=Ya,ns=da,rs=$a,os=Ka,is=ki,as=Ja.MutationObserver||Ja.WebKitMutationObserver,ss=Ja.document,cs=Ja.process,ls=Ja.Promise,us=Za("queueMicrotask");if(!us){var ds=new es,hs=function(){var t,e;for(is&&(t=cs.domain)&&t.exit();e=ds.get();)try{e()}catch(t){throw ds.head&&Ga(),t}t&&t.enter()};ns||is||os||!as||!ss?!rs&&ls&&ls.resolve?((Va=ls.resolve(void 0)).constructor=ls,Xa=Qa(Va.then,Va),Ga=function(){Xa(hs)}):is?Ga=function(){cs.nextTick(hs)}:(ts=Qa(ts,Ja),Ga=function(){ts(hs)}):(qa=!0,za=ss.createTextNode(""),new as(hs).observe(za,{characterData:!0}),Ga=function(){za.data=qa=!qa}),us=function(t){ds.head||Ga(),ds.add(t)}}var fs=us,ps=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},vs=n.Promise,ys=n,ms=vs,gs=W,ws=qr,bs=sn,xs=ee,Ss=Ti,Os=et;ms&&ms.prototype;var Ps=xs("species"),Es=!1,Ts=gs(ys.PromiseRejectionEvent),ks=ws("Promise",(function(){var t=bs(ms),e=t!==String(ms);if(!e&&66===Os)return!0;if(!Os||Os<51||!/native code/.test(t)){var n=new ms((function(t){t(1)})),r=function(t){t((function(){}),(function(){}))};if((n.constructor={})[Ps]=r,!(Es=n.then((function(){}))instanceof r))return!0}return!(e||"BROWSER"!==Ss&&"DENO"!==Ss||Ts)})),Cs={CONSTRUCTOR:ks,REJECTION_EVENT:Ts,SUBCLASSING:Es},As={},js=mt,Rs=TypeError,_s=function(t){var e,n;this.promise=new t((function(t,r){if(void 0!==e||void 0!==n)throw new Rs("Bad Promise constructor");e=t,n=r})),this.resolve=js(e),this.reject=js(n)};As.f=function(t){return new _s(t)};var Ls,Ds,Is,Bs=Zr,Hs=ki,Ns=n,Ws=l,Us=Jn,Fs=Ni,Ms=function(t,e,n){t&&!n&&(t=t.prototype),t&&!Ui(t,Fi)&&Wi(t,Fi,{configurable:!0,value:e})},Gs=function(t){var e=qi(t);Vi&&e&&!e[Xi]&&zi(e,Xi,{configurable:!0,get:function(){return this}})},qs=mt,zs=W,Vs=F,Xs=function(t,e){if(Yi(e,t))return t;throw new $i("Incorrect invocation")},Ys=function(t,e){var n,r=Qi(t).constructor;return void 0===r||ea(n=Qi(r)[na])?e:ta(n)},$s=Na.set,Ks=fs,Js=function(t,e){},Zs=ps,Qs=Ya,tc=Cn,ec=vs,nc=As,rc="Promise",oc=Cs.CONSTRUCTOR,ic=Cs.REJECTION_EVENT,ac=Cs.SUBCLASSING,sc=tc.getterFor(rc),cc=tc.set,lc=ec&&ec.prototype,uc=ec,dc=lc,hc=Ns.TypeError,fc=Ns.document,pc=Ns.process,vc=nc.f,yc=vc,mc=!!(fc&&fc.createEvent&&Ns.dispatchEvent),gc="unhandledrejection",wc=function(t){var e;return!(!Vs(t)||!zs(e=t.then))&&e},bc=function(t,e){var n,r,o,i=e.value,a=1===e.state,s=a?t.ok:t.fail,c=t.resolve,l=t.reject,u=t.domain;try{s?(a||(2===e.rejection&&Ec(e),e.rejection=1),!0===s?n=i:(u&&u.enter(),n=s(i),u&&(u.exit(),o=!0)),n===t.promise?l(new hc("Promise-chain cycle")):(r=wc(n))?Ws(r,n,c,l):c(n)):l(i)}catch(t){u&&!o&&u.exit(),l(t)}},xc=function(t,e){t.notified||(t.notified=!0,Ks((function(){for(var n,r=t.reactions;n=r.get();)bc(n,t);t.notified=!1,e&&!t.rejection&&Oc(t)})))},Sc=function(t,e,n){var r,o;mc?((r=fc.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),Ns.dispatchEvent(r)):r={promise:e,reason:n},!ic&&(o=Ns["on"+t])?o(r):t===gc&&Js("Unhandled promise rejection",n)},Oc=function(t){Ws($s,Ns,(function(){var e,n=t.facade,r=t.value;if(Pc(t)&&(e=Zs((function(){Hs?pc.emit("unhandledRejection",r,n):Sc(gc,n,r)})),t.rejection=Hs||Pc(t)?2:1,e.error))throw e.value}))},Pc=function(t){return 1!==t.rejection&&!t.parent},Ec=function(t){Ws($s,Ns,(function(){var e=t.facade;Hs?pc.emit("rejectionHandled",e):Sc("rejectionhandled",e,t.value)}))},Tc=function(t,e,n){return function(r){t(e,r,n)}},kc=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,xc(t,!0))},Cc=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw new hc("Promise can't be resolved itself");var r=wc(e);r?Ks((function(){var n={done:!1};try{Ws(r,e,Tc(Cc,n,t),Tc(kc,n,t))}catch(e){kc(n,e,t)}})):(t.value=e,t.state=1,xc(t,!1))}catch(e){kc({done:!1},e,t)}}};if(oc&&(dc=(uc=function(t){Xs(this,dc),qs(t),Ws(Ls,this);var e=sc(this);try{t(Tc(Cc,e),Tc(kc,e))}catch(t){kc(e,t)}}).prototype,(Ls=function(t){cc(this,{type:rc,done:!1,notified:!1,parent:!1,reactions:new Qs,rejection:!1,state:0,value:null})}).prototype=Us(dc,"then",(function(t,e){var n=sc(this),r=vc(Ys(this,uc));return n.parent=!0,r.ok=!zs(t)||t,r.fail=zs(e)&&e,r.domain=Hs?pc.domain:void 0,0===n.state?n.reactions.add(r):Ks((function(){bc(r,n)})),r.promise})),Ds=function(){var t=new Ls,e=sc(t);this.promise=t,this.resolve=Tc(Cc,e),this.reject=Tc(kc,e)},nc.f=vc=function(t){return t===uc||undefined===t?new Ds(t):yc(t)},zs(ec)&&lc!==Object.prototype)){Is=lc.then,ac||Us(lc,"then",(function(t,e){var n=this;return new uc((function(t,e){Ws(Is,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete lc.constructor}catch(t){}Fs&&Fs(lc,dc)}Bs({global:!0,constructor:!0,wrap:!0,forced:oc},{Promise:uc}),Ms(uc,rc,!1),Gs(rc);var Ac=io,jc=l,Rc=_e,_c=ft,Lc=mo,Dc=ur,Ic=z,Bc=ti,Hc=Xo,Nc=lo,Wc=TypeError,Uc=function(t,e){this.stopped=t,this.result=e},Fc=Uc.prototype,Mc=function(t,e,n){var r,o,i,a,s,c,l,u=n&&n.that,d=!(!n||!n.AS_ENTRIES),h=!(!n||!n.IS_RECORD),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),v=Ac(e,u),y=function(t){return r&&Nc(r,"normal",t),new Uc(!0,t)},m=function(t){return d?(Rc(t),p?v(t[0],t[1],y):v(t[0],t[1])):p?v(t,y):v(t)};if(h)r=t.iterator;else if(f)r=t;else{if(!(o=Hc(t)))throw new Wc(_c(t)+" is not iterable");if(Lc(o)){for(i=0,a=Dc(t);a>i;i++)if((s=m(t[i]))&&Ic(Fc,s))return s;return new Uc(!1)}r=Bc(t,o)}for(c=h?t.next:r.next;!(l=jc(c,r)).done;){try{s=m(l.value)}catch(t){Nc(r,"throw",t)}if("object"==typeof s&&s&&Ic(Fc,s))return s}return new Uc(!1)},Gc=vs,qc=Cs.CONSTRUCTOR||!yi((function(t){Gc.all(t).then(void 0,(function(){}))})),zc=l,Vc=mt,Xc=As,Yc=ps,$c=Mc;Zr({target:"Promise",stat:!0,forced:qc},{all:function(t){var e=this,n=Xc.f(e),r=n.resolve,o=n.reject,i=Yc((function(){var n=Vc(e.resolve),i=[],a=0,s=1;$c(t,(function(t){var c=a++,l=!1;s++,zc(n,e,t).then((function(t){l||(l=!0,i[c]=t,--s||r(i))}),o)})),--s||r(i)}));return i.error&&o(i.value),n.promise}});var Kc=Zr,Jc=Cs.CONSTRUCTOR,Zc=vs,Qc=q,tl=W,el=Jn,nl=Zc&&Zc.prototype;if(Kc({target:"Promise",proto:!0,forced:Jc,real:!0},{catch:function(t){return this.then(void 0,t)}}),tl(Zc)){var rl=Qc("Promise").prototype.catch;nl.catch!==rl&&el(nl,"catch",rl,{unsafe:!0})}var ol=l,il=mt,al=As,sl=ps,cl=Mc;Zr({target:"Promise",stat:!0,forced:qc},{race:function(t){var e=this,n=al.f(e),r=n.reject,o=sl((function(){var o=il(e.resolve);cl(t,(function(t){ol(o,e,t).then(n.resolve,r)}))}));return o.error&&r(o.value),n.promise}});var ll=As;Zr({target:"Promise",stat:!0,forced:Cs.CONSTRUCTOR},{reject:function(t){var e=ll.f(this);return(0,e.reject)(t),e.promise}});var ul=_e,dl=F,hl=As,fl=Zr,pl=Cs.CONSTRUCTOR,vl=function(t,e){if(ul(t),dl(e)&&e.constructor===t)return e;var n=hl.f(t);return(0,n.resolve)(e),n.promise};q("Promise"),fl({target:"Promise",stat:!0,forced:pl},{resolve:function(t){return vl(this,t)}});var yl={},ml=xr,gl=Sr,wl=Object.keys||function(t){return ml(t,gl)},bl=i,xl=Ce,Sl=ke,Ol=_e,Pl=H,El=wl;yl.f=bl&&!xl?Object.defineProperties:function(t,e){Ol(t);for(var n,r=Pl(e),o=El(e),i=o.length,a=0;i>a;)Sl.f(t,n=o[a++],r[n]);return t};var Tl,kl=_e,Cl=yl,Al=Sr,jl=pn,Rl=ca,_l=ve,Ll="prototype",Dl="script",Il=fn("IE_PROTO"),Bl=function(){},Hl=function(t){return"<"+Dl+">"+t+"</"+Dl+">"},Nl=function(t){t.write(Hl("")),t.close();var e=t.parentWindow.Object;return t=null,e},Wl=function(){try{Tl=new ActiveXObject("htmlfile")}catch(t){}var t,e,n;Wl="undefined"!=typeof document?document.domain&&Tl?Nl(Tl):(e=_l("iframe"),n="java"+Dl+":",e.style.display="none",Rl.appendChild(e),e.src=String(n),(t=e.contentWindow.document).open(),t.write(Hl("document.F=Object")),t.close(),t.F):Nl(Tl);for(var r=Al.length;r--;)delete Wl[Ll][Al[r]];return Wl()};jl[Il]=!0;var Ul=ee,Fl=Object.create||function(t,e){var n;return null!==t?(Bl[Ll]=kl(t),n=new Bl,Bl[Ll]=null,n[Il]=t):n=Wl(),void 0===e?n:Cl.f(n,e)},Ml=ke.f,Gl=Ul("unscopables"),ql=Array.prototype;void 0===ql[Gl]&&Ml(ql,Gl,{configurable:!0,value:Fl(null)});var zl=function(t){ql[Gl][t]=!0},Vl=vr.includes,Xl=zl;Zr({target:"Array",proto:!0,forced:o((function(){return!Array(1).includes()}))},{includes:function(t){return Vl(this,t,arguments.length>1?arguments[1]:void 0)}}),Xl("includes");var Yl=Nt,$l=ar,Kl=ur,Jl=zl;Zr({target:"Array",proto:!0},{fill:function(t){for(var e=Yl(this),n=Kl(e),r=arguments.length,o=$l(r>1?arguments[1]:void 0,n),i=r>2?arguments[2]:void 0,a=void 0===i?n:$l(i,n);a>o;)e[o++]=t;return e}}),Jl("fill");var Zl="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||"undefined"!=typeof global&&global||{},Ql="URLSearchParams"in Zl,tu="Symbol"in Zl&&"iterator"in Symbol,eu="FileReader"in Zl&&"Blob"in Zl&&function(){try{return new Blob,!0}catch(t){return!1}}(),nu="FormData"in Zl,ru="ArrayBuffer"in Zl;if(ru)var ou=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],iu=ArrayBuffer.isView||function(t){return t&&ou.indexOf(Object.prototype.toString.call(t))>-1};function au(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(t)||""===t)throw new TypeError('Invalid character in header field name: "'+t+'"');return t.toLowerCase()}function su(t){return"string"!=typeof t&&(t=String(t)),t}function cu(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return tu&&(e[Symbol.iterator]=function(){return e}),e}function lu(t){this.map={},t instanceof lu?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){if(2!=t.length)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+t.length);this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function uu(t){if(!t._noBody)return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function du(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function hu(t){var e=new FileReader,n=du(e);return e.readAsArrayBuffer(t),n}function fu(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function pu(){return this.bodyUsed=!1,this._initBody=function(t){var e;this.bodyUsed=this.bodyUsed,this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:eu&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:nu&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:Ql&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():ru&&eu&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=fu(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):ru&&(ArrayBuffer.prototype.isPrototypeOf(t)||iu(t))?this._bodyArrayBuffer=fu(t):this._bodyText=t=Object.prototype.toString.call(t):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):Ql&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},eu&&(this.blob=function(){var t=uu(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var t=uu(this);return t||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}if(eu)return this.blob().then(hu);throw new Error("could not read as ArrayBuffer")},this.text=function(){var t=uu(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=du(e),r=/charset=([A-Za-z0-9_-]+)/.exec(t.type),o=r?r[1]:"utf-8";return e.readAsText(t,o),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},nu&&(this.formData=function(){return this.text().then(mu)}),this.json=function(){return this.text().then(JSON.parse)},this}lu.prototype.append=function(t,e){t=au(t),e=su(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},lu.prototype.delete=function(t){delete this.map[au(t)]},lu.prototype.get=function(t){return t=au(t),this.has(t)?this.map[t]:null},lu.prototype.has=function(t){return this.map.hasOwnProperty(au(t))},lu.prototype.set=function(t,e){this.map[au(t)]=su(e)},lu.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},lu.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),cu(t)},lu.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),cu(t)},lu.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),cu(t)},tu&&(lu.prototype[Symbol.iterator]=lu.prototype.entries);var vu=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function yu(t,e){if(!(this instanceof yu))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var n=(e=e||{}).body;if(t instanceof yu){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new lu(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new lu(e.headers)),this.method=function(t){var e=t.toUpperCase();return vu.indexOf(e)>-1?e:t}(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal||function(){if("AbortController"in Zl)return(new AbortController).signal}(),this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(n),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==e.cache&&"no-cache"!==e.cache)){var r=/([?&])_=[^&]*/;if(r.test(this.url))this.url=this.url.replace(r,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function mu(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function gu(t,e){if(!(this instanceof gu))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=void 0===e.statusText?"":""+e.statusText,this.headers=new lu(e.headers),this.url=e.url||"",this._initBody(t)}yu.prototype.clone=function(){return new yu(this,{body:this._bodyInit})},pu.call(yu.prototype),pu.call(gu.prototype),gu.prototype.clone=function(){return new gu(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new lu(this.headers),url:this.url})},gu.error=function(){var t=new gu(null,{status:200,statusText:""});return t.ok=!1,t.status=0,t.type="error",t};var wu=[301,302,303,307,308];gu.redirect=function(t,e){if(-1===wu.indexOf(e))throw new RangeError("Invalid status code");return new gu(null,{status:e,headers:{location:t}})};var bu=Zl.DOMException;try{new bu}catch(t){(bu=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack}).prototype=Object.create(Error.prototype),bu.prototype.constructor=bu}function xu(t,e){return new Promise((function(n,r){var o=new yu(t,e);if(o.signal&&o.signal.aborted)return r(new bu("Aborted","AbortError"));var i=new XMLHttpRequest;function a(){i.abort()}if(i.onload=function(){var t,e,r={statusText:i.statusText,headers:(t=i.getAllResponseHeaders()||"",e=new lu,t.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(t){return 0===t.indexOf("\n")?t.substr(1,t.length):t})).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();try{e.append(r,o)}catch(t){}}})),e)};0===o.url.indexOf("file://")&&(i.status<200||i.status>599)?r.status=200:r.status=i.status,r.url="responseURL"in i?i.responseURL:r.headers.get("X-Request-URL");var a="response"in i?i.response:i.responseText;setTimeout((function(){n(new gu(a,r))}),0)},i.onerror=function(){setTimeout((function(){r(new TypeError("Network request failed"))}),0)},i.ontimeout=function(){setTimeout((function(){r(new TypeError("Network request timed out"))}),0)},i.onabort=function(){setTimeout((function(){r(new bu("Aborted","AbortError"))}),0)},i.open(o.method,function(t){try{return""===t&&Zl.location.href?Zl.location.href:t}catch(e){return t}}(o.url),!0),"include"===o.credentials?i.withCredentials=!0:"omit"===o.credentials&&(i.withCredentials=!1),"responseType"in i&&(eu?i.responseType="blob":ru&&(i.responseType="arraybuffer")),e&&"object"==typeof e.headers&&!(e.headers instanceof lu||Zl.Headers&&e.headers instanceof Zl.Headers)){var s=[];Object.getOwnPropertyNames(e.headers).forEach((function(t){s.push(au(t)),i.setRequestHeader(t,su(e.headers[t]))})),o.headers.forEach((function(t,e){-1===s.indexOf(e)&&i.setRequestHeader(e,t)}))}else o.headers.forEach((function(t,e){i.setRequestHeader(e,t)}));o.signal&&(o.signal.addEventListener("abort",a),i.onreadystatechange=function(){4===i.readyState&&o.signal.removeEventListener("abort",a)}),i.send(void 0===o._bodyInit?null:o._bodyInit)}))}xu.polyfill=!0,Zl.fetch||(Zl.fetch=xu,Zl.Headers=lu,Zl.Request=yu,Zl.Response=gu),"undefined"==typeof CanvasRenderingContext2D||CanvasRenderingContext2D.prototype.resetTransform||(CanvasRenderingContext2D.prototype.resetTransform=function(){this.setTransform(1,0,0,1,0,0)});!function(t,e){void 0===e&&(e={});var n=e.insertAt;if("undefined"!=typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t))}}("@keyframes watermark{0%{background-position:0 0}25%{background-position:100% 100%}50%{background-position:0 0}75%{background-position:100% -100%}to{background-position:0 0}}");var Su=function(t,e){return Su=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Su(t,e)};var Ou=function(){return Ou=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},Ou.apply(this,arguments)};function Pu(t,e,n,r){return new(n||(n=Promise))((function(o,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}c((r=r.apply(t,e||[])).next())}))}function Eu(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}}var Tu=function(t){return t.toDataURL("image/png",1)},ku=function(t){return"function"==typeof t},Cu=function(t){return void 0===t},Au=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n="http://www.w3.org/2000/svg");var r=document.createElementNS(n,t);for(var o in e)r.setAttribute(o,e[o]);return r},ju=function(t,e){return Pu(void 0,void 0,void 0,(function(){var n,r,o,i,a,s,c,l,u;return Eu(this,(function(d){switch(d.label){case 0:return n=Au("svg",{xmlns:"http://www.w3.org/2000/svg"}),(r=document.createElement("div")).setAttribute("xmlns","http://www.w3.org/1999/xhtml"),r.style.cssText="\n  text-align: center;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  height: 100%;\n  font: ".concat(t.font,";\n  color: ").concat(e.fontColor,";\n"),r.innerHTML="<div class='rich-text-content'>".concat(e.content,"</div>"),document.body.appendChild(r),[4,Ru(r)];case 1:return d.sent(),o=null===(u=r.querySelector(".rich-text-content"))||void 0===u?void 0:u.getBoundingClientRect(),i=null==o?void 0:o.width,a=null==o?void 0:o.height,document.body.removeChild(r),s=e.richTextWidth||i||e.width,c=e.richTextHeight||a||e.height,n.setAttribute("width",s.toString()),n.setAttribute("height",c.toString()),(l=Au("foreignObject",{width:s.toString(),height:c.toString()})).appendChild(r),n.appendChild(l),[2,{element:n,width:s,height:c}]}}))}))};function Ru(t){return Pu(this,void 0,void 0,(function(){var e,n,r,o,i;return Eu(this,(function(a){switch(a.label){case 0:e=t.querySelectorAll("img"),n=function(t){var e,n,r,o;return Eu(this,(function(i){switch(i.label){case 0:if(!(e=t.getAttribute("src")))return[3,6];i.label=1;case 1:return i.trys.push([1,5,,6]),[4,fetch(e)];case 2:return[4,i.sent().blob()];case 3:return n=i.sent(),[4,new Promise((function(t,e){var r=new FileReader;r.onloadend=function(){return t(r.result)},r.onerror=e,r.readAsDataURL(n)}))];case 4:return r=i.sent(),"string"==typeof r&&t.setAttribute("src",r),[3,6];case 5:return o=i.sent(),console.error("Error converting ".concat(e," to base64:"),o),[3,6];case 6:return[2]}}))},r=0,o=Array.from(e),a.label=1;case 1:return r<o.length?(i=o[r],[5,n(i)]):[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))}var _u=function(t,e){return Cu(t)?e:t},Lu=function(t,e,n){void 0===e&&(e=void 0),void 0===n&&(n=void 0);var r=new Image;return r.setAttribute("crossOrigin","Anonymous"),!Cu(e)&&(r.width=e),!Cu(n)&&(r.height=n),r.src=t,new Promise((function(t){r.onload=function(){t(r)}}))},Du={width:300,height:300,rotate:45,layout:"default",auxiliaryLine:!1,translatePlacement:"middle",contentType:"text",content:"hello watermark-js-plus",textType:"fill",imageWidth:0,imageHeight:0,lineHeight:30,zIndex:2147483647,backgroundPosition:"0 0",backgroundRepeat:"repeat",fontSize:"20px",fontFamily:"sans-serif",fontStyle:"",fontVariant:"",fontColor:"#000",fontWeight:"normal",filter:"none",letterSpacing:"0px",wordSpacing:"0px",globalAlpha:.5,mode:"default",mutationObserve:!0,monitorProtection:!1,movable:!1,parent:"body",onSuccess:function(){},onBeforeDestroy:function(){},onDestroyed:function(){},onObserveError:function(){}},Iu=function(t){"undefined"!=typeof window&&t&&(Object.defineProperty(window,"MutationObserver",{writable:!1,configurable:!1}),Object.defineProperty(window,"requestAnimationFrame",{writable:!1,configurable:!1}))},Bu=function(){function t(e,n){this.props=e,this.options=n,this.canvas=t.createCanvas(this.options.width,this.options.height),this.recommendOptions=function(t,e,n){var r=t.getContext("2d");if(null===r)throw new Error("get context error");r.font="".concat(e.fontStyle," ").concat(e.fontVariant," ").concat(e.fontWeight," ").concat(e.fontSize," ").concat(e.fontFamily),r.filter=e.filter,r.letterSpacing=e.letterSpacing,r.wordSpacing=e.wordSpacing,(null==e?void 0:e.rotate)&&(e.rotate=(360-e.rotate%360)*(Math.PI/180)),Cu(n.textRowMaxWidth)&&(e.textRowMaxWidth=e.width);var o={image:{rect:{width:e.imageWidth,height:e.imageHeight},position:{x:0,y:0}},textLine:{data:[],yOffsetValue:0},advancedStyleParams:{linear:{x0:0,x1:0},radial:{x0:0,y0:0,r0:0,x1:0,y1:0,r1:0},conic:{x:0,y:0,startAngle:0},pattern:{}}};switch(e.contentType){case"text":o.textLine.data=[e.content];break;case"multi-line-text":o.textLine.data=function(t,e,n){for(var r=[],o="",i="",a=0,s=e.length;a<s;a++)"\n"!==(i=e.charAt(a))?(o+=i,t.measureText(o).width>n&&(r.push(o.substring(0,o.length-1)),o="",a--)):(r.push(o),o="");return r.push(o),r}(r,e.content,e.textRowMaxWidth)}var i=e.width/2,a=e.height/2,s="middle",c="center";switch(Cu(null==n?void 0:n.translateX)||Cu(null==n?void 0:n.translateY)?(o.advancedStyleParams.linear.x0=-e.width/2,o.advancedStyleParams.linear.x1=e.width/2,o.advancedStyleParams.radial.r0=0,o.advancedStyleParams.radial.r1=e.width/2):(i=null==n?void 0:n.translateX,a=null==n?void 0:n.translateY,s="top",c="left"),n.translatePlacement){case"top":i=e.width/2,a=0,s="top",o.advancedStyleParams.linear.x0=-e.width/2,o.advancedStyleParams.linear.x1=e.width/2,o.advancedStyleParams.radial.y0=o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.radial.y1=o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.conic.y=o.textLine.data.length*e.lineHeight/2;break;case"top-start":i=0,a=0,s="top",c="start",o.advancedStyleParams.linear.x0=0,o.advancedStyleParams.linear.x1=e.width,o.advancedStyleParams.radial.x0=e.width/2,o.advancedStyleParams.radial.y0=o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.radial.x1=e.width/2,o.advancedStyleParams.radial.y1=o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.conic.x=e.width/2,o.advancedStyleParams.conic.y=o.textLine.data.length*e.lineHeight/2;break;case"top-end":i=e.width,a=0,s="top",c="end",o.advancedStyleParams.linear.x0=0,o.advancedStyleParams.linear.x1=-e.width,o.advancedStyleParams.radial.x0=-e.width/2,o.advancedStyleParams.radial.y0=o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.radial.x1=-e.width/2,o.advancedStyleParams.radial.y1=o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.conic.x=-e.width/2,o.advancedStyleParams.conic.y=o.textLine.data.length*e.lineHeight/2;break;case"bottom":i=e.width/2,a=e.height,s="bottom",o.advancedStyleParams.linear.x0=-e.width/2,o.advancedStyleParams.linear.x1=e.width/2,o.advancedStyleParams.radial.y0=-o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.radial.y1=-o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.conic.x=0,o.advancedStyleParams.conic.y=-o.textLine.data.length*e.lineHeight/2;break;case"bottom-start":i=0,a=e.height,s="bottom",c="start",o.advancedStyleParams.linear.x0=0,o.advancedStyleParams.linear.x1=e.width,o.advancedStyleParams.radial.x0=e.width/2,o.advancedStyleParams.radial.y0=-o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.radial.x1=e.width/2,o.advancedStyleParams.radial.y1=-o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.conic.x=e.width/2,o.advancedStyleParams.conic.y=-o.textLine.data.length*e.lineHeight/2;break;case"bottom-end":i=e.width,a=e.height,s="bottom",c="end",o.advancedStyleParams.linear.x0=0,o.advancedStyleParams.linear.x1=-e.width,o.advancedStyleParams.radial.x0=-e.width/2,o.advancedStyleParams.radial.y0=-o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.radial.x1=-e.width/2,o.advancedStyleParams.radial.y1=-o.textLine.data.length*e.lineHeight/2,o.advancedStyleParams.conic.x=-e.width/2,o.advancedStyleParams.conic.y=-o.textLine.data.length*e.lineHeight/2;break;case"left":i=0,a=e.height/2,c="start",o.advancedStyleParams.linear.x0=0,o.advancedStyleParams.linear.x1=e.width,o.advancedStyleParams.radial.x0=e.width/2,o.advancedStyleParams.radial.x1=e.width/2,o.advancedStyleParams.conic.x=e.width/2,o.advancedStyleParams.conic.y=0;break;case"right":i=e.width,a=e.height/2,c="end",o.advancedStyleParams.linear.x0=0,o.advancedStyleParams.linear.x1=-e.width,o.advancedStyleParams.radial.x0=-e.width/2,o.advancedStyleParams.radial.x1=-e.width/2,o.advancedStyleParams.conic.x=-e.width/2,o.advancedStyleParams.conic.y=0}if(e.translateX=i,e.translateY=a,Cu(null==n?void 0:n.textBaseline)&&(e.textBaseline=s),Cu(null==n?void 0:n.textAlign)&&(e.textAlign=c),["text","multi-line-text"].includes(e.contentType))switch(e.textBaseline){case"middle":o.textLine.yOffsetValue=(o.textLine.data.length-1)*e.lineHeight/2;break;case"bottom":case"alphabetic":case"ideographic":o.textLine.yOffsetValue=(o.textLine.data.length-1)*e.lineHeight+(e.lineHeight-parseInt(e.fontSize))/2;break;case"top":case"hanging":o.textLine.yOffsetValue=-e.lineHeight/2+parseInt(e.fontSize)/2}return o}(this.canvas,this.options,this.props)}return t.createCanvas=function(t,e){var n,r=window.devicePixelRatio||1,o=document.createElement("canvas");return o.width=t*r,o.height=e*r,o.style.width="".concat(t,"px"),o.style.height="".concat(e,"px"),null===(n=o.getContext("2d"))||void 0===n||n.setTransform(r,0,0,r,0,0),o},t.clearCanvas=function(t){var e=t.getContext("2d");if(null===e)throw new Error("get context error");e.restore(),e.resetTransform(),e.clearRect(0,0,t.width,t.height);var n=window.devicePixelRatio||1;e.setTransform(n,0,0,n,0,0)},t.prototype.getCanvas=function(){return this.canvas},t.prototype.clear=function(){t.clearCanvas(this.canvas)},t.prototype.draw=function(){var t=this,e=this.canvas.getContext("2d");if(null===e)throw new Error("get context error");return this.options.auxiliaryLine&&(e.beginPath(),e.rect(0,0,this.options.width,this.options.height),e.lineWidth=1,e.strokeStyle="#000",e.stroke(),e.closePath(),e.beginPath(),e.rect(this.options.translateX,this.options.translateY,1,1),e.lineWidth=1,e.strokeStyle="#f00",e.stroke(),e.closePath()),this.setStyle(e),e.save(),e.translate(this.options.translateX,this.options.translateY),e.rotate(this.options.rotate),new Promise((function(n){switch(t.options.contentType){case"text":t.drawText(e,n);break;case"image":t.drawImage(e,n);break;case"multi-line-text":t.drawMultiLineText(e,n);break;case"rich-text":t.drawRichText(e,n)}}))},t.prototype.setStyle=function(t){var e,n="fillStyle";"stroke"===this.options.textType&&(n="strokeStyle");var r=this.options.fontColor;if(null===(e=this.options)||void 0===e?void 0:e.advancedStyle)switch(this.options.advancedStyle.type){case"linear":r=this.createLinearGradient(t);break;case"radial":r=this.createRadialGradient(t);break;case"conic":r=this.createConicGradient(t);break;case"pattern":r=this.createPattern(t)}t[n]&&r&&(t[n]=r),this.options.textAlign&&(t.textAlign=this.options.textAlign),this.options.textBaseline&&(t.textBaseline=this.options.textBaseline),t.globalAlpha=this.options.globalAlpha,this.options.shadowStyle&&(t.shadowBlur=_u(this.options.shadowStyle.shadowBlur,0),t.shadowColor=_u(this.options.shadowStyle.shadowColor,"#00000000"),t.shadowOffsetX=_u(this.options.shadowStyle.shadowOffsetX,0),t.shadowOffsetY=_u(this.options.shadowStyle.shadowOffsetY,0)),ku(this.options.extraDrawFunc)&&this.options.extraDrawFunc(t)},t.prototype.createLinearGradient=function(t){var e,n,r,o,i,a,s,c,l,u,d,h,f,p,v,y=t.createLinearGradient(_u(null===(r=null===(n=null===(e=this.options.advancedStyle)||void 0===e?void 0:e.params)||void 0===n?void 0:n.linear)||void 0===r?void 0:r.x0,this.recommendOptions.advancedStyleParams.linear.x0),_u(null===(a=null===(i=null===(o=this.options.advancedStyle)||void 0===o?void 0:o.params)||void 0===i?void 0:i.linear)||void 0===a?void 0:a.y0,0),_u(null===(l=null===(c=null===(s=this.options.advancedStyle)||void 0===s?void 0:s.params)||void 0===c?void 0:c.linear)||void 0===l?void 0:l.x1,this.recommendOptions.advancedStyleParams.linear.x1),_u(null===(h=null===(d=null===(u=this.options.advancedStyle)||void 0===u?void 0:u.params)||void 0===d?void 0:d.linear)||void 0===h?void 0:h.y1,0));return null===(v=null===(p=null===(f=this.options)||void 0===f?void 0:f.advancedStyle)||void 0===p?void 0:p.colorStops)||void 0===v||v.forEach((function(t){y.addColorStop(t.offset,t.color)})),y},t.prototype.createConicGradient=function(t){var e,n,r,o,i,a,s,c,l,u,d,h,f,p,v,y=t.createConicGradient(_u(null===(o=null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedStyle)||void 0===n?void 0:n.params)||void 0===r?void 0:r.conic)||void 0===o?void 0:o.startAngle,0),_u(null===(c=null===(s=null===(a=null===(i=this.options)||void 0===i?void 0:i.advancedStyle)||void 0===a?void 0:a.params)||void 0===s?void 0:s.conic)||void 0===c?void 0:c.x,this.recommendOptions.advancedStyleParams.conic.x),_u(null===(h=null===(d=null===(u=null===(l=this.options)||void 0===l?void 0:l.advancedStyle)||void 0===u?void 0:u.params)||void 0===d?void 0:d.conic)||void 0===h?void 0:h.y,this.recommendOptions.advancedStyleParams.conic.y));return null===(v=null===(p=null===(f=this.options)||void 0===f?void 0:f.advancedStyle)||void 0===p?void 0:p.colorStops)||void 0===v||v.forEach((function(t){y.addColorStop(t.offset,t.color)})),y},t.prototype.createRadialGradient=function(t){var e,n,r,o,i,a,s,c,l,u,d,h,f,p,v,y,m,g,w,b,x,S,O,P,E,T,k,C=t.createRadialGradient(_u(null===(o=null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedStyle)||void 0===n?void 0:n.params)||void 0===r?void 0:r.radial)||void 0===o?void 0:o.x0,this.recommendOptions.advancedStyleParams.radial.x0),_u(null===(c=null===(s=null===(a=null===(i=this.options)||void 0===i?void 0:i.advancedStyle)||void 0===a?void 0:a.params)||void 0===s?void 0:s.radial)||void 0===c?void 0:c.y0,this.recommendOptions.advancedStyleParams.radial.y0),_u(null===(h=null===(d=null===(u=null===(l=this.options)||void 0===l?void 0:l.advancedStyle)||void 0===u?void 0:u.params)||void 0===d?void 0:d.radial)||void 0===h?void 0:h.r0,this.recommendOptions.advancedStyleParams.radial.r0),_u(null===(y=null===(v=null===(p=null===(f=this.options)||void 0===f?void 0:f.advancedStyle)||void 0===p?void 0:p.params)||void 0===v?void 0:v.radial)||void 0===y?void 0:y.x1,this.recommendOptions.advancedStyleParams.radial.x1),_u(null===(b=null===(w=null===(g=null===(m=this.options)||void 0===m?void 0:m.advancedStyle)||void 0===g?void 0:g.params)||void 0===w?void 0:w.radial)||void 0===b?void 0:b.y1,this.recommendOptions.advancedStyleParams.radial.y1),_u(null===(P=null===(O=null===(S=null===(x=this.options)||void 0===x?void 0:x.advancedStyle)||void 0===S?void 0:S.params)||void 0===O?void 0:O.radial)||void 0===P?void 0:P.r1,this.recommendOptions.advancedStyleParams.radial.r1));return null===(k=null===(T=null===(E=this.options)||void 0===E?void 0:E.advancedStyle)||void 0===T?void 0:T.colorStops)||void 0===k||k.forEach((function(t){C.addColorStop(t.offset,t.color)})),C},t.prototype.createPattern=function(t){var e,n,r,o,i,a,s,c;return t.createPattern(null===(o=null===(r=null===(n=null===(e=this.options)||void 0===e?void 0:e.advancedStyle)||void 0===n?void 0:n.params)||void 0===r?void 0:r.pattern)||void 0===o?void 0:o.image,(null===(c=null===(s=null===(a=null===(i=this.options)||void 0===i?void 0:i.advancedStyle)||void 0===a?void 0:a.params)||void 0===s?void 0:s.pattern)||void 0===c?void 0:c.repetition)||"")},t.prototype.setText=function(t,e){var n="fillText";"stroke"===this.options.textType&&(n="strokeText"),t[n]&&t[n](e.text,e.x,e.y,e.maxWidth)},t.prototype.drawText=function(t,e){this.setText(t,{text:this.options.content,x:0,y:0-this.recommendOptions.textLine.yOffsetValue,maxWidth:this.options.textRowMaxWidth||this.options.width}),e(t.canvas)},t.prototype.drawImage=function(t,e){var n=this;Lu(this.options.image).then((function(r){var o=n.getImageRect(r),i=o.width,a=o.height,s=n.getDrawImagePosition(i,a);t.drawImage(r,s.x,s.y,i,a),e(t.canvas)}))},t.prototype.drawMultiLineText=function(t,e){var n=this,r=this.recommendOptions.textLine.data,o=this.recommendOptions.textLine.yOffsetValue;r.forEach((function(e,r){n.setText(t,{text:e,x:0,y:n.options.lineHeight*r-o,maxWidth:n.options.textRowMaxWidth||n.options.width})})),e(t.canvas)},t.prototype.drawRichText=function(t,e){return Pu(this,void 0,void 0,(function(){var n,r=this;return Eu(this,(function(o){switch(o.label){case 0:return[4,ju(t,this.options)];case 1:return n=o.sent(),Lu((i=n.element,a=i.outerHTML.replace(/<(img|br|input|hr|embed)(.*?)>/g,"<$1$2/>").replace(/\n/g,"").replace(/\t/g,"").replace(/#/g,"%23"),"data:image/svg+xml;charset=utf-8,".concat(a)),n.width,n.height).then((function(n){var o=r.getDrawImagePosition(n.width,n.height);t.drawImage(n,o.x,o.y,n.width,n.height),e(t.canvas)})),[2]}var i,a}))}))},t.prototype.getImageRect=function(t){var e={width:this.options.imageWidth||0,height:this.options.imageHeight||0};switch(!0){case 0!==e.width&&0===e.height:e.height=e.width*t.height/t.width;break;case 0===e.width&&0!==e.height:e.width=e.height*t.width/t.height;break;case 0===e.width&&0===e.height:e.width=t.width,e.height=t.height}return e},t.prototype.getDrawImagePosition=function(t,e){var n,r,o={x:-t/2,y:-e/2};switch(this.options.translatePlacement){case"top":o.x=-t/2,o.y=0;break;case"top-start":o.x=0,o.y=0;break;case"top-end":o.x=-t,o.y=0;break;case"bottom":o.x=-t/2,o.y=-e;break;case"bottom-start":o.x=0,o.y=-e;break;case"bottom-end":o.x=-t,o.y=-e;break;case"left":o.x=0,o.y=-e/2;break;case"right":o.x=-t,o.y=-e/2}return!Cu(null===(n=this.props)||void 0===n?void 0:n.translateX)&&(o.x=0),!Cu(null===(r=this.props)||void 0===r?void 0:r.translateY)&&(o.y=0),o},t}(),Hu=function(){function t(t,e){var n,r,o,i,a,s,c;this.options=t,this.partialWidth=this.options.width,this.partialHeight=this.options.height,this.rows=(null===(n=this.options.gridLayoutOptions)||void 0===n?void 0:n.rows)||1,this.cols=(null===(r=this.options.gridLayoutOptions)||void 0===r?void 0:r.cols)||1,this.matrix=(null===(o=this.options.gridLayoutOptions)||void 0===o?void 0:o.matrix)||(a=this.rows,s=this.cols,c=1,Array.from({length:a},(function(){return new Array(s).fill(c)}))),this.gap=(null===(i=this.options.gridLayoutOptions)||void 0===i?void 0:i.gap)||[0,0],this.partialCanvas=e}return t.prototype.draw=function(){var t,e,n,r,o,i,a,s,c=Bu.createCanvas((null===(t=this.options.gridLayoutOptions)||void 0===t?void 0:t.width)||this.partialWidth*this.cols+this.gap[0]*this.cols,(null===(e=this.options.gridLayoutOptions)||void 0===e?void 0:e.height)||this.partialHeight*this.rows+this.gap[1]*this.rows),l=c.getContext("2d");(null===(n=this.options.gridLayoutOptions)||void 0===n?void 0:n.backgroundImage)&&(null==l||l.drawImage(null===(r=this.options.gridLayoutOptions)||void 0===r?void 0:r.backgroundImage,0,0,null===(o=this.options.gridLayoutOptions)||void 0===o?void 0:o.width,null===(i=this.options.gridLayoutOptions)||void 0===i?void 0:i.height));for(var u=0;u<this.rows;u++)for(var d=0;d<this.cols;d++)(null===(s=null===(a=this.matrix)||void 0===a?void 0:a[u])||void 0===s?void 0:s[d])&&(null==l||l.drawImage(this.partialCanvas,this.partialWidth*d+this.gap[0]*d,this.partialHeight*u+this.gap[1]*u,this.partialWidth,this.partialHeight));return c},t}(),Nu=function(t,e){return"grid"===t.layout?new Hu(t,e).draw():e},Wu=function(){function t(t){void 0===t&&(t={}),this.parentElement=document.body,this.isCreating=!1,this.props=t,this.options=Ou(Ou({},Du),t),this.changeParentElement(this.options.parent),this.watermarkCanvas=new Bu(this.props,this.options),Iu(this.options.monitorProtection)}return t.prototype.changeOptions=function(){return Pu(this,arguments,void 0,(function(t,e,n){return void 0===t&&(t={}),void 0===e&&(e="overwrite"),void 0===n&&(n=!0),Eu(this,(function(r){switch(r.label){case 0:return this.initConfigData(t,e),Iu(this.options.monitorProtection),n?(this.remove(),[4,this.create()]):[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.create=function(){return Pu(this,void 0,void 0,(function(){var t,e,n,r,o,i,a,s,c,l,u,d;return Eu(this,(function(h){switch(h.label){case 0:return this.isCreating?[2]:(this.isCreating=!0,this.validateUnique()&&this.validateContent()?(t=Cu(this.watermarkDom),[4,null===(i=this.watermarkCanvas)||void 0===i?void 0:i.draw()]):(this.isCreating=!1,[2]));case 1:if(h.sent(),this.layoutCanvas=Nu(this.options,null===(a=this.watermarkCanvas)||void 0===a?void 0:a.getCanvas()),e=Tu(this.layoutCanvas),null===(s=this.watermarkCanvas)||void 0===s||s.clear(),this.watermarkDom=document.createElement("div"),n=document.createElement("div"),this.watermarkDom.__WATERMARK__="watermark",this.watermarkDom.__WATERMARK__INSTANCE__=this,r=this.checkParentElementType(),this.watermarkDom.style.cssText="\n      z-index:".concat(this.options.zIndex,"!important;display:block!important;visibility:visible!important;transform:none!important;scale:none!important;\n      ").concat("custom"===r?"top:0!important;bottom:0!important;left:0!important;right:0!important;height:100%!important;pointer-events:none!important;position:absolute!important;":"position:relative!important;","\n    "),o=function(t){var e,n,r;if("grid"===t.layout){var o=(null===(e=t.gridLayoutOptions)||void 0===e?void 0:e.cols)||1,i=(null===(n=t.gridLayoutOptions)||void 0===n?void 0:n.rows)||1,a=(null===(r=t.gridLayoutOptions)||void 0===r?void 0:r.gap)||[0,0];return[t.width*o+a[0]*o,t.height*i+a[1]*i]}return[t.width,t.height]}(this.options),n.style.cssText="\n      display:block!important;visibility:visible!important;pointer-events:none;top:0;bottom:0;left:0;right:0;transform:none!important;scale:none!important;\n      position:".concat("root"===r?"fixed":"absolute","!important;-webkit-print-color-adjust:exact!important;width:100%!important;height:100%!important;\n      z-index:").concat(this.options.zIndex,"!important;background-image:url(").concat(e,")!important;background-repeat:").concat(this.options.backgroundRepeat,"!important;\n      background-size:").concat(o[0],"px ").concat(o[1],"px!important;background-position:").concat(this.options.backgroundPosition,";\n      ").concat(this.options.movable?"animation: 200s ease 0s infinite normal none running watermark !important;":"","\n    "),this.watermarkDom.appendChild(n),this.parentElement.appendChild(this.watermarkDom),this.options.mutationObserve)try{this.bindMutationObserve()}catch(t){null===(l=(c=this.options).onObserveError)||void 0===l||l.call(c)}return t&&(null===(d=(u=this.options).onSuccess)||void 0===d||d.call(u)),this.isCreating=!1,[2]}}))}))},t.prototype.destroy=function(){this.remove(),this.watermarkDom=void 0},t.prototype.check=function(){return Pu(this,void 0,void 0,(function(){return Eu(this,(function(t){return[2,this.parentElement.contains(this.watermarkDom)]}))}))},t.prototype.remove=function(){var t,e,n,r,o,i,a,s;null===(e=(t=this.options).onBeforeDestroy)||void 0===e||e.call(t),null===(n=this.observer)||void 0===n||n.disconnect(),null===(r=this.parentObserve)||void 0===r||r.disconnect(),this.unbindCheckWatermarkElementEvent(),null===(i=null===(o=this.watermarkDom)||void 0===o?void 0:o.parentNode)||void 0===i||i.removeChild(this.watermarkDom),null===(s=(a=this.options).onDestroyed)||void 0===s||s.call(a)},t.prototype.initConfigData=function(t,e){var n=this;void 0===e&&(e="overwrite"),"append"===e?Object.keys(t).forEach((function(e){n.props&&(n.props[e]=t[e])})):this.props=t,this.options=Ou(Ou({},Du),this.props),this.changeParentElement(this.options.parent),this.watermarkCanvas=new Bu(this.props,this.options)},t.prototype.changeParentElement=function(t){if("string"==typeof t){var e=document.querySelector(t);e&&(this.parentElement=e)}else this.parentElement=t;this.parentElement||console.error("[WatermarkJsPlus]: please pass a valid parent element.")},t.prototype.validateUnique=function(){var t=!0;return Array.from(this.parentElement.childNodes).forEach((function(e){t&&Object.hasOwnProperty.call(e,"__WATERMARK__")&&(t=!1)})),t},t.prototype.validateContent=function(){switch(this.options.contentType){case"image":return Object.hasOwnProperty.call(this.options,"image");case"multi-line-text":case"rich-text":case"text":return this.options.content.length>0}},t.prototype.checkParentElementType=function(){return["html","body"].includes(this.parentElement.tagName.toLocaleLowerCase())?"root":"custom"},t.prototype.checkWatermarkElement=function(){return Pu(this,void 0,void 0,(function(){return Eu(this,(function(t){switch(t.label){case 0:return this.parentElement.contains(this.watermarkDom)?[3,2]:(this.remove(),[4,this.create()]);case 1:t.sent(),t.label=2;case 2:return this.bindCheckWatermarkElementEvent(),[2]}}))}))},t.prototype.bindMutationObserve=function(){var t=this;this.watermarkDom&&(this.bindCheckWatermarkElementEvent(),this.observer=new MutationObserver((function(e){return Pu(t,void 0,void 0,(function(){return Eu(this,(function(t){switch(t.label){case 0:return e.length>0?(this.remove(),[4,this.create()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})),this.observer.observe(this.watermarkDom,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),this.parentObserve=new MutationObserver((function(e){return Pu(t,void 0,void 0,(function(){var t,n,r,o;return Eu(this,(function(i){switch(i.label){case 0:t=0,n=e,i.label=1;case 1:return t<n.length?(null==(r=n[t])?void 0:r.target)===this.watermarkDom||(null===(o=null==r?void 0:r.removedNodes)||void 0===o?void 0:o[0])===this.watermarkDom||"childList"===r.type&&r.target===this.parentElement&&r.target.lastChild!==this.watermarkDom?(this.remove(),[4,this.create()]):[3,3]:[3,4];case 2:i.sent(),i.label=3;case 3:return t++,[3,1];case 4:return[2]}}))}))})),this.parentObserve.observe(this.parentElement,{attributes:!0,childList:!0,subtree:!0,characterData:!0}))},t.prototype.bindCheckWatermarkElementEvent=function(){this.unbindCheckWatermarkElementEvent(),this.checkWatermarkElementRequestID=requestAnimationFrame(this.checkWatermarkElement.bind(this))},t.prototype.unbindCheckWatermarkElementEvent=function(){Cu(this.checkWatermarkElementRequestID)||cancelAnimationFrame(this.checkWatermarkElementRequestID)},t}(),Uu=function(t){function e(e){void 0===e&&(e={});return t.call(this,Ou(Ou({},e),{globalAlpha:.005,mode:"blind"}))||this}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Su(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.decode=function(t){var e=t.url,n=void 0===e?"":e,r=t.fillColor,o=void 0===r?"#000":r,i=t.compositeOperation,a=void 0===i?"color-burn":i,s=t.mode,c=void 0===s?"canvas":s,l=t.compositeTimes,u=void 0===l?3:l,d=t.onSuccess;if(n&&"canvas"===c){var h=new Image;h.src=n,h.addEventListener("load",(function(){var t=h.width,e=h.height,n=Bu.createCanvas(t,e),r=n.getContext("2d");if(!r)throw new Error("get context error");r.drawImage(h,0,0,t,e),r.globalCompositeOperation=a,r.fillStyle=o;for(var i=0;i<u;i++)r.fillRect(0,0,t,e);var s=Tu(n);ku(d)&&(null==d||d(s))}))}},e}(Wu),Fu=function(){function t(t){var e;void 0===t&&(t={}),this.drew=!1,this.props=t,this.options=Ou(Ou({},Du),t),this.watermarkCanvas=new Bu(this.props,this.options),this.originalSrc=null===(e=this.props.dom)||void 0===e?void 0:e.src,this.backgroundImage=this.getBackgroundImage()}return t.prototype.create=function(){return Pu(this,void 0,void 0,(function(){var t,e,n,r,o;return Eu(this,(function(i){switch(i.label){case 0:return this.drew?[2]:[4,null===(t=this.watermarkCanvas)||void 0===t?void 0:t.draw()];case 1:return i.sent(),this.options.layout="grid",this.options.gridLayoutOptions=Ou(Ou({},this.options.gridLayoutOptions),{width:null===(e=this.backgroundImage)||void 0===e?void 0:e.width,height:null===(n=this.backgroundImage)||void 0===n?void 0:n.height,backgroundImage:this.backgroundImage}),this.layoutCanvas=Nu(this.options,null===(r=this.watermarkCanvas)||void 0===r?void 0:r.getCanvas()),this.options.dom.src=Tu(this.layoutCanvas),null===(o=this.watermarkCanvas)||void 0===o||o.clear(),this.drew=!0,[2]}}))}))},t.prototype.destroy=function(){this.options.dom.src=this.originalSrc,this.drew=!1},t.prototype.getBackgroundImage=function(){if(this.options.dom)return this.options.dom},t}();exports.BlindWatermark=Uu,exports.ImageWatermark=Fu,exports.Watermark=Wu;
