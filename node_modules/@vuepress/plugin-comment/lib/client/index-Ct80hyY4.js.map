{"version":3,"file":"index-Ct80hyY4.js","sources":["../../src/client/helpers/comment.ts"],"sourcesContent":["import { isFunction } from '@vuepress/helper/client'\nimport type { App, MaybeRefOrGetter, Ref } from 'vue'\nimport { inject, isRef, ref, watch } from 'vue'\nimport type {\n  ArtalkOptions,\n  CommentOptions,\n  GiscusOptions,\n  TwikooOptions,\n  WalineOptions,\n} from '../../shared/index.js'\n\ndeclare const __VUEPRESS_DEV__: boolean\ndeclare const __COMMENT_OPTIONS__: CommentOptions\n\nconst commentOptions = __COMMENT_OPTIONS__\n\nconst comment = ref(commentOptions)\n\nconst commentSymbol = Symbol(__VUEPRESS_DEV__ ? 'comment' : '')\n\nconst defineCommentConfig = <T extends CommentOptions>(\n  options: MaybeRefOrGetter<T>,\n): void => {\n  if (isRef(options)) {\n    watch(\n      () => options.value,\n      (value) => {\n        comment.value = { ...commentOptions, ...value }\n      },\n    )\n  } else if (isFunction(options)) {\n    watch(options, (value) => {\n      comment.value = { ...commentOptions, ...value }\n    })\n  } else {\n    comment.value = { ...commentOptions, ...options }\n  }\n}\n\nexport const useCommentOptions = <T extends CommentOptions>(): Ref<T> =>\n  inject(commentSymbol)!\n\nexport const defineArtalkConfig = defineCommentConfig<ArtalkOptions>\n\nexport const useArtalkOptions = useCommentOptions<ArtalkOptions>\n\nexport const defineGiscusConfig = defineCommentConfig<GiscusOptions>\n\nexport const useGiscusOptions = useCommentOptions<GiscusOptions>\n\nexport const defineTwikooConfig = defineCommentConfig<TwikooOptions>\n\nexport const useTwikooOptions = useCommentOptions<TwikooOptions>\n\nexport const defineWalineConfig = defineCommentConfig<WalineOptions>\n\nexport const useWalineOptions = useCommentOptions<WalineOptions>\n\nexport const injectCommentConfig = (app: App): void => {\n  app.provide(commentSymbol, comment)\n}\n"],"names":["commentOptions","comment","ref","commentSymbol","defineCommentConfig","options","isRef","watch","value","isFunction","useCommentOptions","inject","defineArtalkConfig","useArtalkOptions","defineGiscusConfig","useGiscusOptions","defineTwikooConfig","useTwikooOptions","defineWalineConfig","useWalineOptions","injectCommentConfig","app"],"mappings":"iHAcA,MAAMA,EAAiB,oBAEjBC,EAAUC,EAAIF,CAAc,EAE5BG,EAAgB,OAAO,iBAAmB,UAAY,EAAE,EAExDC,EACJC,GACS,CACLC,EAAMD,CAAO,EACfE,EACE,IAAMF,EAAQ,MACbG,GAAU,CACTP,EAAQ,MAAQ,CAAE,GAAGD,EAAgB,GAAGQ,CAAM,CAChD,CACF,EACSC,EAAWJ,CAAO,EAC3BE,EAAMF,EAAUG,GAAU,CACxBP,EAAQ,MAAQ,CAAE,GAAGD,EAAgB,GAAGQ,CAAM,CAChD,CAAC,EAEDP,EAAQ,MAAQ,CAAE,GAAGD,EAAgB,GAAGK,CAAQ,CAEpD,EAEaK,EAAoB,IAC/BC,EAAOR,CAAa,EAETS,EAAqBR,EAErBS,EAAmBH,EAEnBI,EAAqBV,EAErBW,EAAmBL,EAEnBM,EAAqBZ,EAErBa,EAAmBP,EAEnBQ,EAAqBd,EAErBe,EAAmBT,EAEnBU,EAAuBC,GAAmB,CACrDA,EAAI,QAAQlB,EAAeF,CAAO,CACpC"}