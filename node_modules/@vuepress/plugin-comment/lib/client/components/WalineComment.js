import{useLocaleConfig as d,wait as c,LoadingIcon as f}from"@vuepress/helper/client";import{pageviewCount as g}from"@waline/client/pageview";import{defineComponent as L,computed as n,onMounted as w,watch as C,nextTick as h,h as l,defineAsyncComponent as y}from"vue";import{usePageFrontmatter as W,usePageLang as A}from"vuepress/client";import"@waline/client/waline.css";import"../styles/waline.css";import{c as N}from"../index-Ct80hyY4.js";const E=WALINE_LOCALES;WALINE_META&&import("@waline/client/waline-meta.css");var R=L({name:"WalineComment",props:{identifier:{type:String,required:!0}},setup(a){const e=N(),u=W(),m=A(),p=d(E);let t=null;const i=n(()=>!!e.value.serverURL),r=n(()=>{if(!i.value)return!1;const s=e.value.pageview!==!1,o=u.value.pageview;return!!o||s&&o!==!1}),v=n(()=>({lang:m.value==="zh-CN"?"zh-CN":"en",locale:p.value,dark:"[data-theme='dark']",...e.value,path:a.identifier}));return w(()=>{C(()=>[a.identifier,e.value.serverURL,e.value.delay,r.value],async()=>{t?.(),t=null,r.value&&(await h(),await c(e.value.delay??800),t=g({serverURL:e.value.serverURL,path:a.identifier}))},{immediate:!0})}),()=>i.value?l("div",{id:"comment",class:"waline-wrapper"},l(y({loader:async()=>(await import("@waline/client/component")).Waline,loadingComponent:f}),v.value)):null}});export{R as default};
//# sourceMappingURL=WalineComment.js.map
