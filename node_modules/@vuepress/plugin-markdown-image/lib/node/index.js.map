{"version":3,"file":"index.js","sources":["../../src/node/utils.ts","../../src/node/prepare/prepareClientConfigFile.ts","../../src/node/markdownImagePlugin.ts"],"sourcesContent":["export const PLUGIN_NAME = '@vuepress/plugin-markdown-image'\n","import { getRealPath } from '@vuepress/helper'\nimport type { App } from 'vuepress'\nimport type { MarkdownImagePluginOptions } from '../options.js'\nimport { PLUGIN_NAME } from '../utils.js'\n\nexport const prepareClientConfigFile = async (\n  app: App,\n  { figure, mark }: MarkdownImagePluginOptions,\n): Promise<string> => {\n  let content = ''\n\n  if (figure) {\n    content += `\\\nimport \"${getRealPath(`${PLUGIN_NAME}/figure.css`, import.meta.url)}\"\n`\n  }\n\n  if (mark) {\n    content += `\\\nimport \"${getRealPath(`${PLUGIN_NAME}/mark.css`, import.meta.url)}\"\n`\n  }\n\n  return app.writeTemp(\n    'markdown-image/client.js',\n    `\\\n${content}\n`,\n  )\n}\n","import { figure } from '@mdit/plugin-figure'\nimport { imgLazyload } from '@mdit/plugin-img-lazyload'\nimport type { MarkdownItImgMarkOptions } from '@mdit/plugin-img-mark'\nimport { imgMark } from '@mdit/plugin-img-mark'\nimport { imgSize, obsidianImageSize } from '@mdit/plugin-img-size'\nimport type { Plugin } from 'vuepress/core'\nimport { isPlainObject } from 'vuepress/shared'\nimport type { MarkdownImagePluginOptions } from './options.js'\nimport { prepareClientConfigFile } from './prepare/index.js'\nimport { PLUGIN_NAME } from './utils.js'\n\nexport const markdownImagePlugin = (\n  options: MarkdownImagePluginOptions,\n): Plugin => ({\n  name: PLUGIN_NAME,\n\n  extendsMarkdown: (md) => {\n    const { mark } = options\n\n    if (options.figure) md.use(figure)\n    if (options.lazyload) md.use(imgLazyload)\n    if (options.obsidianSize) md.use(obsidianImageSize)\n    if (options.size) md.use(imgSize)\n    if (mark)\n      md.use<MarkdownItImgMarkOptions>(imgMark, isPlainObject(mark) ? mark : {})\n  },\n\n  clientConfigFile: (app) => prepareClientConfigFile(app, options),\n})\n"],"names":["PLUGIN_NAME","prepareClientConfigFile","app","figure","mark","content","getRealPath","markdownImagePlugin","options","md","imgLazyload","obsidianImageSize","imgSize","imgMark","isPlainObject"],"mappings":"2TAAO,MAAMA,EAAc,kCCKdC,EAA0B,MACrCC,EACA,CAAE,OAAAC,EAAQ,KAAAC,CAAK,IACK,CACpB,IAAIC,EAAU,GAEd,OAAIF,IACFE,GAAW,WACLC,EAAY,GAAGN,CAAW,cAAe,YAAY,GAAG,CAAC;AAAA,GAI7DI,IACFC,GAAW,WACLC,EAAY,GAAGN,CAAW,YAAa,YAAY,GAAG,CAAC;AAAA,GAIxDE,EAAI,UACT,2BACA,GACFG,CAAO;AAAA,CAEP,CACF,EClBaE,EACXC,IACY,CACZ,KAAMR,EAEN,gBAAkBS,GAAO,CACvB,KAAM,CAAE,KAAAL,CAAK,EAAII,EAEbA,EAAQ,QAAQC,EAAG,IAAIN,CAAM,EAC7BK,EAAQ,UAAUC,EAAG,IAAIC,CAAW,EACpCF,EAAQ,cAAcC,EAAG,IAAIE,CAAiB,EAC9CH,EAAQ,MAAMC,EAAG,IAAIG,CAAO,EAC5BR,GACFK,EAAG,IAA8BI,EAASC,EAAcV,CAAI,EAAIA,EAAO,EAAE,CAC7E,EAEA,iBAAmBF,GAAQD,EAAwBC,EAAKM,CAAO,CACjE"}