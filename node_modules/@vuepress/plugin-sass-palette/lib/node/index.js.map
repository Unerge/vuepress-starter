{"version":3,"file":"index.js","sources":["../../src/node/utils.ts","../../src/node/injectScssConfigModule.ts","../../src/node/prepare/prepareClientConfigFile.ts","../../src/node/prepare/prepareConfigSass.ts","../../src/node/prepare/prepareInjectSass.ts","../../src/node/prepare/preparePaletteSass.ts","../../src/node/prepare/prepareStyleSass.ts","../../src/node/sassPalettePlugin.ts","../../src/node/removePalettePlugin.ts","../../src/node/useSassPalettePlugin.ts"],"sourcesContent":["import { Logger } from '@vuepress/helper'\nimport { fs, getDirname, path } from 'vuepress/utils'\n\nconst __dirname = getDirname(import.meta.url)\n\nexport const EMPTY_FILE = path.resolve(__dirname, '../../styles/empty.scss')\n\nexport const PLUGIN_NAME = '@vuepress/plugin-sass-palette'\n\nexport const logger = new Logger(PLUGIN_NAME)\n\nexport const getPath = (filePath: string): string =>\n  fs.pathExistsSync(filePath) ? filePath : EMPTY_FILE\n\nexport const getIdPrefix = (id: string): string => (id ? `${id}-` : '')\n","import type { ViteBundlerOptions } from '@vuepress/bundler-vite'\nimport type {\n  SassLoaderOptions,\n  WebpackBundlerOptions,\n} from '@vuepress/bundler-webpack'\nimport {\n  getBundlerName,\n  isFunction,\n  isString,\n  mergeViteConfig,\n} from '@vuepress/helper'\nimport type { App } from 'vuepress/core'\nimport { getIdPrefix } from './utils.js'\n\ntype SassLoaderContext =\n  Exclude<SassLoaderOptions['additionalData'], string | undefined> extends (\n    content: string,\n    loaderContext: infer T,\n  ) => string\n    ? T\n    : never\n\n/**\n * Use \"additionalData\" to make `${getIdPrefix(id)}config` available in scss\n *\n * @param config VuePress Bundler config\n * @param app VuePress Node App\n * @param id Module id\n */\nexport const injectScssConfigModule = (\n  config: unknown,\n  app: App,\n  id: string,\n): void => {\n  const bundlerName = getBundlerName(app)\n\n  // For vite\n  if (bundlerName === 'vite') {\n    const viteBundlerConfig = config as ViteBundlerOptions\n\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n    const originalAdditionalData:\n      | string\n      | ((source: string, file: string) => Promise<string> | string)\n      | undefined =\n      viteBundlerConfig.viteOptions?.css?.preprocessorOptions?.scss\n        .additionalData // eslint-disable-line @typescript-eslint/no-unsafe-member-access\n\n    viteBundlerConfig.viteOptions = mergeViteConfig(\n      viteBundlerConfig.viteOptions ?? {},\n      {\n        css: {\n          preprocessorOptions: {\n            scss: {\n              charset: false,\n              additionalData: async (\n                source: string,\n                file: string,\n              ): Promise<string> => {\n                let originalContent = isString(originalAdditionalData)\n                  ? `${originalAdditionalData}${source}`\n                  : isFunction(originalAdditionalData)\n                    ? await originalAdditionalData(source, file)\n                    : source\n\n                if (\n                  !originalContent.match(\n                    new RegExp(\n                      `@use\\\\s+([\"'])@sass-palette\\\\/${getIdPrefix(id)}config\\\\1;`,\n                    ),\n                  )\n                )\n                  originalContent = `@use \"@sass-palette/${getIdPrefix(id)}config\";\\n${originalContent}`\n                if (\n                  !originalContent.match(\n                    new RegExp(\n                      `@use\\\\s+([\"'])@sass-palette\\\\/${getIdPrefix(id)}palette\\\\1;`,\n                    ),\n                  )\n                )\n                  originalContent = `@use \"@sass-palette/${getIdPrefix(id)}palette\";\\n${originalContent}`\n\n                return originalContent\n              },\n            },\n          },\n        },\n      },\n    )\n  }\n\n  // For webpack\n  else if (bundlerName === 'webpack') {\n    const webpackBundlerConfig = config as WebpackBundlerOptions\n\n    if (!webpackBundlerConfig.scss) webpackBundlerConfig.scss = {}\n\n    const { additionalData } = webpackBundlerConfig.scss\n\n    const additionalDataHandler = (\n      content: string,\n      loaderContext: SassLoaderContext,\n    ): string => {\n      let originalContent = isString(additionalData)\n        ? `${additionalData}${content}`\n        : isFunction(additionalData)\n          ? additionalData(content, loaderContext)\n          : content\n\n      if (\n        !originalContent.match(\n          new RegExp(\n            `@use\\\\s+([\"'])@sass-palette\\\\/${getIdPrefix(id)}config\\\\1;`,\n          ),\n        )\n      )\n        originalContent = `@use \"@sass-palette/${getIdPrefix(id)}config\";\\n${originalContent}`\n\n      if (\n        !originalContent.match(\n          new RegExp(\n            `@use\\\\s+([\"'])@sass-palette\\\\/${getIdPrefix(id)}palette\\\\1;`,\n          ),\n        )\n      )\n        originalContent = `@use \"@sass-palette/${getIdPrefix(id)}palette\";\\n${originalContent}`\n\n      return originalContent\n    }\n\n    webpackBundlerConfig.scss.additionalData = additionalDataHandler\n  }\n}\n","import type { App } from 'vuepress/core'\nimport { getIdPrefix } from '../utils.js'\n\nexport const prepareClientConfigFile = (\n  app: App,\n  id: string,\n): Promise<string> =>\n  app.writeTemp(\n    `sass-palette/load-${id || 'default'}.js`,\n    `\\\nimport \"@sass-palette/${getIdPrefix(id)}inject\";\n`,\n  )\n","import type { App } from 'vuepress/core'\nimport { getIdPrefix, getPath } from '../utils.js'\n\nexport const prepareConfigSass = (\n  app: App,\n  id: string,\n  defaultConfig: string,\n  userConfig: string,\n): Promise<string> =>\n  app.writeTemp(\n    `sass-palette/${getIdPrefix(id)}config.scss`,\n    `\\\n@import \"file:///${getPath(defaultConfig)}\";\n@import \"file:///${getPath(userConfig)}\";\n`,\n  )\n","import type { App } from 'vuepress/core'\nimport { getIdPrefix } from '../utils.js'\n\nexport const prepareInjectSass = (app: App, id: string): Promise<string> =>\n  app.writeTemp(\n    `sass-palette/${getIdPrefix(id)}inject.scss`,\n    `\\\n@use \"sass:meta\";\n@use \"@sass-palette/helper\";\n@use \"@sass-palette/${getIdPrefix(id)}palette\";\n\n$palette-variables: meta.module-variables(\"${getIdPrefix(id)}palette\");\n${\n  app.env.isDebug\n    ? `\n@debug \"${id} config variables: #{meta.inspect(meta.module-variables(\"${getIdPrefix(id)}config\"))}\";\n@debug \"${id} palette variables: #{meta.inspect($palette-variables)}\";\n`\n    : ''\n}\n\n@include helper.inject($palette-variables);\n`,\n  )\n","import type { App } from 'vuepress/core'\nimport { getIdPrefix, getPath } from '../utils.js'\n\nexport interface PreparePaletteOptions {\n  id: string\n  defaultPalette?: string\n  generator: string\n  userPalette: string\n}\n\nexport const preparePaletteSass = (\n  app: App,\n  { id, defaultPalette, generator, userPalette }: PreparePaletteOptions,\n): Promise<string> =>\n  app.writeTemp(\n    `sass-palette/${getIdPrefix(id)}palette.scss`,\n    `\\\n${defaultPalette ? `@import \"file:///${getPath(defaultPalette)}\";` : ''}\n@import \"file:///${getPath(userPalette)}\";\n@import \"file:///${getPath(generator)}\";\n`,\n  )\n","import type { App } from 'vuepress/core'\nimport { getIdPrefix, getPath } from '../utils.js'\n\nexport interface PrepareStyleOptions {\n  id: string\n  userStyle: string | null\n}\n\nexport const prepareStyleSass = (\n  app: App,\n  id: string,\n  userStyle: string | null,\n): Promise<string | null> =>\n  userStyle\n    ? app.writeTemp(\n        `sass-palette/${getIdPrefix(id)}style.scss`,\n        `\\\n@forward \"file:///${getPath(userStyle)}\";\n`,\n      )\n    : Promise.resolve(null)\n","import { addViteConfig, chainWebpack } from '@vuepress/helper'\nimport { watch } from 'chokidar'\nimport type { PluginFunction } from 'vuepress/core'\nimport { getDirname, path } from 'vuepress/utils'\nimport { injectScssConfigModule } from './injectScssConfigModule.js'\nimport type { SassPalettePluginOptions } from './options.js'\nimport {\n  prepareClientConfigFile,\n  prepareConfigSass,\n  prepareInjectSass,\n  preparePaletteSass,\n  prepareStyleSass,\n} from './prepare/index.js'\nimport { EMPTY_FILE, PLUGIN_NAME, getIdPrefix, logger } from './utils.js'\n\nconst __dirname = getDirname(import.meta.url)\n\nexport const sassPalettePlugin =\n  (options: SassPalettePluginOptions): PluginFunction =>\n  (app) => {\n    if (app.env.isDebug) logger.info('Options:', options)\n\n    const {\n      id = '',\n      config = `.vuepress/styles/${getIdPrefix(id)}config.scss`,\n      defaultConfig = path.resolve(\n        __dirname,\n        '../../styles/default/config.scss',\n      ),\n      palette = `.vuepress/styles/${getIdPrefix(id)}palette.scss`,\n      defaultPalette,\n      generator = EMPTY_FILE,\n      style = '',\n    } = options\n\n    const userConfig = app.dir.source(config)\n    const userPalette = app.dir.source(palette)\n    const userStyle = style ? app.dir.source(style) : null\n\n    return {\n      name: PLUGIN_NAME,\n\n      multiple: true,\n\n      id,\n\n      alias: {\n        [`@sass-palette/helper`]: path.resolve(\n          __dirname,\n          '../../styles/helper.scss',\n        ),\n        [`@sass-palette/${getIdPrefix(id)}config`]: app.dir.temp(\n          `sass-palette/${getIdPrefix(id)}config.scss`,\n        ),\n        [`@sass-palette/${getIdPrefix(id)}inject`]: app.dir.temp(\n          `sass-palette/${getIdPrefix(id)}inject.scss`,\n        ),\n        [`@sass-palette/${getIdPrefix(id)}palette`]: app.dir.temp(\n          `sass-palette/${getIdPrefix(id)}palette.scss`,\n        ),\n        ...(style\n          ? {\n              [`@sass-palette/${getIdPrefix(id)}style`]: app.dir.temp(\n                `sass-palette/${getIdPrefix(id)}style.scss`,\n              ),\n            }\n          : {}),\n      },\n\n      extendsBundlerOptions: (bundlerOptions: unknown): void => {\n        // switch to modern api and silent import deprecation for vite\n        addViteConfig(bundlerOptions, app, {\n          css: {\n            preprocessorOptions: {\n              sass: {\n                api: 'modern',\n                silenceDeprecations: ['import'],\n              },\n              scss: {\n                api: 'modern',\n                silenceDeprecations: ['import'],\n              },\n            },\n          },\n        })\n        // silent import deprecation for webpack\n        chainWebpack(bundlerOptions, app, (webpackOptions) => {\n          webpackOptions.module\n            .rule('scss')\n            .use('sass-loader')\n            .tap((loaderOptions) => ({\n              ...loaderOptions,\n              // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n              sassOptions: {\n                ...loaderOptions.sassOptions,\n                silenceDeprecations: [\n                  'import',\n                  // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\n                  ...(loaderOptions.sassOptions?.silenceDeprecations ?? []),\n                ],\n              },\n            }))\n        })\n        injectScssConfigModule(bundlerOptions, app, id)\n      },\n\n      onInitialized: (): Promise<void> =>\n        Promise.all([\n          prepareConfigSass(app, id, defaultConfig, userConfig),\n          prepareInjectSass(app, id),\n          preparePaletteSass(app, {\n            id,\n            defaultPalette,\n            generator,\n            userPalette,\n          }),\n          prepareStyleSass(app, id, userStyle),\n        ]).then(() => {\n          if (app.env.isDebug) logger.info(`Style file for ${id} generated`)\n        }),\n\n      onWatched: (_, watchers): void => {\n        const configWatcher = watch(userConfig, {\n          cwd: app.dir.source(),\n          ignoreInitial: true,\n        })\n\n        const updateConfig = (): Promise<void> =>\n          prepareConfigSass(app, id, defaultConfig, userConfig).then(() => {\n            if (app.env.isDebug) logger.info(`Style file for ${id} updated`)\n          })\n\n        configWatcher.on('add', () => {\n          void updateConfig()\n        })\n        configWatcher.on('unlink', () => {\n          void updateConfig()\n        })\n\n        watchers.push(configWatcher)\n\n        const paletteWatcher = watch(userPalette, {\n          cwd: app.dir.source(),\n          ignoreInitial: true,\n        })\n\n        const updatePalette = (): Promise<void> =>\n          Promise.all([\n            prepareConfigSass(app, id, defaultConfig, userConfig),\n            preparePaletteSass(app, {\n              id,\n              defaultPalette,\n              generator,\n              userPalette,\n            }),\n          ]).then(() => {\n            if (app.env.isDebug) logger.info(`Style file for ${id} updated`)\n          })\n\n        paletteWatcher.on('add', () => {\n          void updatePalette()\n        })\n        paletteWatcher.on('unlink', () => {\n          void updatePalette()\n        })\n\n        watchers.push(paletteWatcher)\n\n        if (userStyle) {\n          const styleWatcher = watch(userStyle, {\n            cwd: app.dir.source(),\n            ignoreInitial: true,\n          })\n\n          const updateStyle = (): Promise<void> =>\n            prepareStyleSass(app, id, userStyle).then(() => {\n              if (app.env.isDebug) logger.info(`Style file for ${id} updated`)\n            })\n\n          styleWatcher.on('add', () => {\n            void updateStyle()\n          })\n          styleWatcher.on('unlink', () => {\n            void updateStyle()\n          })\n          watchers.push(styleWatcher)\n        }\n      },\n\n      clientConfigFile: () => prepareClientConfigFile(app, id),\n    }\n  }\n","import type { App, PluginObject } from 'vuepress/core'\n\nexport const removePalettePlugin = (app: App, id: string): void => {\n  const { plugins } = app.pluginApi\n\n  const index = plugins\n    .filter<\n      PluginObject & { id: string }\n    >((plugin): plugin is PluginObject & { id: string } => plugin.name === `@vuepress/plugin-sass-palette`)\n    .findIndex((plugin) => plugin.id === id)\n\n  if (index !== -1) plugins.splice(index, 1)\n}\n","import type { App, PluginObject } from 'vuepress/core'\nimport type { SassPalettePluginOptions } from './options.js'\nimport { sassPalettePlugin } from './sassPalettePlugin.js'\n\nexport const useSassPalettePlugin = (\n  app: App,\n  options: SassPalettePluginOptions,\n): void => {\n  const { plugins } = app.pluginApi\n\n  if (\n    plugins\n      .filter<\n        PluginObject & { id: string }\n      >((plugin): plugin is PluginObject & { id: string } => plugin.name === `@vuepress/plugin-sass-palette`)\n      .every((plugin) => plugin.id !== options.id)\n  )\n    app.use(sassPalettePlugin(options))\n}\n"],"names":["__dirname","getDirname","EMPTY_FILE","path","PLUGIN_NAME","logger","Logger","getPath","filePath","fs","getIdPrefix","id","injectScssConfigModule","config","app","bundlerName","getBundlerName","viteBundlerConfig","originalAdditionalData","mergeViteConfig","source","file","originalContent","isString","isFunction","webpackBundlerConfig","additionalData","additionalDataHandler","content","loaderContext","prepareClientConfigFile","prepareConfigSass","defaultConfig","userConfig","prepareInjectSass","preparePaletteSass","defaultPalette","generator","userPalette","prepareStyleSass","userStyle","sassPalettePlugin","options","palette","style","bundlerOptions","addViteConfig","chainWebpack","webpackOptions","loaderOptions","_","watchers","configWatcher","watch","updateConfig","paletteWatcher","updatePalette","styleWatcher","updateStyle","removePalettePlugin","plugins","index","plugin","useSassPalettePlugin"],"mappings":"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"}