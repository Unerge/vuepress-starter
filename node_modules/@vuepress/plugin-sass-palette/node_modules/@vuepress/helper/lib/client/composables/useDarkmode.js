import { useMutationObserver } from '@vueuse/core';
import { onMounted, readonly, ref } from 'vue';
import { getDarkmode } from '../utils/index.js';
let darkmode = null;
const _useDarkmode = () => {
    const isDarkmode = ref(false);
    // Watch darkmode change
    useMutationObserver(document.documentElement, () => {
        isDarkmode.value = getDarkmode();
    }, {
        attributeFilter: ['data-theme'],
        attributes: true,
    });
    onMounted(() => {
        isDarkmode.value = getDarkmode();
    });
    return readonly(isDarkmode);
};
/**
 * Get darkmode status
 *
 * @returns readonly darkmode ref
 */
// eslint-disable-next-line no-return-assign
export const useDarkmode = () => (darkmode ??= _useDarkmode());
