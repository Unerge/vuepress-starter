import{ref as i,isRef as E,watch as u,inject as b,computed as m,defineComponent as C,onMounted as w,h as _}from"vue";import{useRouter as B,useRouteLocale as y,usePageLang as K}from"vuepress/client";import{deepAssign as h,isFunction as M}from"@vuepress/helper/client";import{debounce as A}from"ts-debounce";import{removeLeadingSlash as I,resolveRoutePathFromUrl as P}from"vuepress/shared";import{useEventListener as R}from"@vueuse/core";const O=e=>{const t=R("keydown",o=>{const n=o.key==="k"&&(o.ctrlKey||o.metaKey);o.key!=="/"&&!n||(o.preventDefault(),e(),t())})},T=e=>e.button===1||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey,$=()=>{const e=B();return{transformItems:t=>t.map(o=>({...o,url:`${__VUEPRESS_BASE__}${I(P(o.url,__DOCSEARCH_INDEX_BASE__))}`})),hitComponent:({hit:t,children:o})=>({type:"a",ref:void 0,constructor:void 0,key:void 0,props:{href:t.url,onClick:n=>{T(n)||(n.preventDefault(),e.push(t.url.replace(__VUEPRESS_BASE__,"/")))},children:o},__v:null}),navigator:{navigate:({itemUrl:t})=>{e.push(t.replace(__VUEPRESS_BASE__,"/"))}},transformSearchClient:t=>{const o=A(t.search,500);return{...t,search:async(...n)=>o(...n)}}}},c=__DOCSEARCH_OPTIONS__,s=i(c),f=Symbol(__VUEPRESS_DEV__?"docsearch":""),L=e=>{E(e)?u(()=>e.value,t=>{s.value=h({},c,t)}):M(e)?u(e,t=>{s.value=h({},c,t)}):s.value=h({},c,e)},k=()=>{const e=b(f),t=y();return m(()=>({...e.value,...e.value.locales?.[t.value]}))},F=e=>{e.provide(f,s)},U=(e,t=[])=>[`lang:${e}`,...Array.isArray(t)?t:[t]],V=({buttonText:e="Search",buttonAriaLabel:t=e}={})=>`<button type="button" class="DocSearch DocSearch-Button" aria-label="${t}"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">${e}</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"><svg width="15" height="15" class="DocSearch-Control-Key-Icon"><path d="M4.505 4.496h2M5.505 5.496v5M8.216 4.496l.055 5.993M10 7.5c.333.333.5.667.5 1v2M12.326 4.5v5.996M8.384 4.496c1.674 0 2.116 0 2.116 1.5s-.442 1.5-2.116 1.5M3.205 9.303c-.09.448-.277 1.21-1.241 1.203C1 10.5.5 9.513.5 8V7c0-1.57.5-2.5 1.464-2.494.964.006 1.134.598 1.24 1.342M12.553 10.5h1.953" stroke-width="1.2" stroke="currentColor" fill="none" stroke-linecap="square"></path></svg></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button>`,D=()=>{if(document.querySelector(".DocSearch-Modal"))return;const e=new Event("keydown");e.key="k",e.metaKey=!0,window.dispatchEvent(e),setTimeout(D,16)},q=e=>{const t="algolia-preconnect";("requestIdleCallback"in window?window.requestIdleCallback:setTimeout)(()=>{if(document.head.querySelector(`#${t}`))return;const o=document.createElement("link");o.id=t,o.rel="preconnect",o.href=`https://${e}-dsn.algolia.net`,o.crossOrigin="",document.head.appendChild(o)})},j=C({name:"DocSearch",props:{containerId:{type:String,default:"docsearch-container"},options:{type:Object,default:()=>({})}},setup(e){const t=k(),o=$(),n=K(),d=y(),r=i(!1),p=i(!1),a=m(()=>{const{locales:l={},...g}=e.options;return{...t.value,...g,...l[d.value]}}),v=async()=>{const{default:l}=await import("@docsearch/js");l({...o,...a.value,container:`#${e.containerId}`,searchParameters:{...a.value.searchParameters,facetFilters:U(n.value,a.value.searchParameters?.facetFilters)}}),r.value=!0},S=()=>{p.value||r.value||(p.value=!0,v(),D(),u(d,v))};return O(S),w(()=>{q(a.value.appId)}),()=>[_("div",{id:e.containerId,style:{display:r.value?"block":"none"}}),r.value?null:_("div",{onClick:S,innerHTML:V(a.value.translations?.button)})]}});export{j as DocSearch,L as defineDocSearchConfig,F as injectDocSearchConfig,k as useDocSearchOptions};
//# sourceMappingURL=index.js.map
