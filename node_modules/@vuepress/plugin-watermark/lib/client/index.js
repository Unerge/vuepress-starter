import{wait as d,isFunction as g,isPlainObject as k}from"@vuepress/helper/client";import{onMounted as v,watch as r,nextTick as h,toValue as m,isRef as l,ref as w,inject as W,computed as _}from"vue";import{useRoutePath as b,useSiteLocaleData as P,withBase as S,usePageFrontmatter as j}from"vuepress/client";import{Watermark as C}from"watermark-js-plus";const E=(e,t,n=500)=>{const a=b(),p=P();v(()=>{const s=new C,u=c=>{const o={content:p.value.title,fontColor:"#76747f",globalAlpha:c.mode==="blind"?.005:.165,...c};o.image?.startsWith("/")&&(o.image=S(o.image)),m(t)&&s.changeOptions(o)};r([t,a],()=>h(()=>{t.value?d(n).then(()=>{u(m(e))}):s.destroy()}),{immediate:!0}),l(e)&&r(e,u)})},f=Symbol(__VUEPRESS_DEV__?"watermark":""),i=w({}),O=e=>{l(e)?r(e,t=>{i.value=t},{immediate:!0}):g(e)?r(e,t=>{i.value=t}):i.value=e},R=e=>{const t=W(f),n=j();return _(()=>{const{watermark:a}=n.value;return{...m(e),...t.value,...k(a)?a:{}}})},V=e=>{e.provide(f,i)};export{O as defineWatermarkConfig,V as injectWatermarkConfig,E as setupWatermark,R as useWatermarkOptions};
//# sourceMappingURL=index.js.map
