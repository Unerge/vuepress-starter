{"version":3,"file":"index.js","sources":["../../src/node/alert.ts","../../src/node/hint.ts","../../src/node/locales.ts","../../src/node/markdownHintPlugin.ts"],"sourcesContent":["import type { MarkdownItAlertOptions as _MarkdownItAlertOptions } from '@mdit/plugin-alert'\nimport { alert as _alert } from '@mdit/plugin-alert'\nimport type { ExactLocaleConfig } from '@vuepress/helper'\nimport { ensureLeadingSlash } from '@vuepress/helper'\nimport type { PluginWithOptions } from 'markdown-it'\nimport type { MarkdownEnv } from 'vuepress/markdown'\nimport { resolveLocalePath } from 'vuepress/shared'\n\nimport type { MarkdownHintPluginLocaleData } from './options.js'\n\nexport type MarkdownItAlertOptions =\n  ExactLocaleConfig<MarkdownHintPluginLocaleData>\n\nexport const alert: PluginWithOptions<MarkdownItAlertOptions> = (\n  md,\n  options = {},\n) => {\n  md.use<_MarkdownItAlertOptions>(_alert, {\n    alertNames: ['important', 'note', 'tip', 'warning', 'caution', 'info'],\n    openRender: (tokens, index) =>\n      `<div class=\"hint-container ${tokens[index].markup}\">\\n`,\n    titleRender: (tokens, index, _options, env: MarkdownEnv) => {\n      const type = tokens[index].markup\n      const relativePath = ensureLeadingSlash(env.filePathRelative ?? '')\n      const localePath = resolveLocalePath(options, relativePath)\n\n      return `\\\n<p class=\"hint-container-title\">${\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        options[localePath]?.[type as keyof MarkdownHintPluginLocaleData] ||\n        type\n      }</p>\n`\n    },\n    closeRender: () => '</div>\\n',\n    deep: true,\n  })\n}\n","import type { MarkdownItContainerOptions } from '@mdit/plugin-container'\nimport { container } from '@mdit/plugin-container'\nimport type { ExactLocaleConfig } from '@vuepress/helper'\nimport { ensureLeadingSlash } from '@vuepress/helper'\nimport type { PluginWithOptions } from 'markdown-it'\nimport type { MarkdownEnv } from 'vuepress/markdown'\nimport { resolveLocalePath } from 'vuepress/shared'\n\nimport type { MarkdownHintPluginLocaleData } from './options.js'\n\nexport type MarkdownItHintOptions =\n  ExactLocaleConfig<MarkdownHintPluginLocaleData>\n\nexport type MarkdownHintContainerName = keyof MarkdownHintPluginLocaleData\n\nexport const hint: PluginWithOptions<MarkdownItHintOptions> = (\n  md,\n  options = {},\n) => {\n  const containers: MarkdownHintContainerName[] = [\n    'info',\n    'note',\n    'tip',\n    'warning',\n    'caution',\n    'important',\n  ]\n\n  containers.forEach((name) => {\n    md.use<MarkdownItContainerOptions>(container, {\n      name,\n      openRender: (tokens, index, _options, env: MarkdownEnv) => {\n        const token = tokens[index]\n\n        // Resolve info (title)\n        let info = token.info.trim().slice(name.length).trim()\n\n        // Get locale\n        if (!info) {\n          const { filePathRelative } = env\n          const relativePath = ensureLeadingSlash(filePathRelative ?? '')\n          const localePath = resolveLocalePath(options, relativePath)\n\n          // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n          info = options[localePath]?.[name]\n        } else {\n          info = md.renderInline(info)\n        }\n\n        return `<div class=\"hint-container ${name}\">\\n<p class=\"hint-container-title\">${info || name}</p>\\n`\n      },\n      closeRender: () => '</div>\\n',\n    })\n  })\n\n  // Compact with @vuepress/theme-default\n  md.use<MarkdownItContainerOptions>(container, {\n    name: 'danger',\n    openRender: (tokens, index, _options, env: MarkdownEnv) => {\n      const token = tokens[index]\n\n      // Resolve info (title)\n      let info = token.info.trim().slice(6).trim()\n\n      // Get locale\n      if (!info) {\n        const { filePathRelative } = env\n        const relativePath = ensureLeadingSlash(filePathRelative ?? '')\n        const localePath = resolveLocalePath(options, relativePath)\n\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        info = options[localePath]?.caution\n      } else {\n        info = md.renderInline(info)\n      }\n\n      return `<div class=\"hint-container caution\">\\n<p class=\"hint-container-title\">${\n        info || 'caution'\n      }</p>\\n`\n    },\n    closeRender: () => '</div>\\n',\n  })\n\n  md.use<MarkdownItContainerOptions>(container, {\n    name: 'details',\n    openRender: (tokens, index, _options, env: MarkdownEnv) => {\n      const token = tokens[index]\n\n      // Resolve info (title)\n      let info = token.info\n        .trim()\n        .slice(\n          // Length of \"details\"\n          7,\n        )\n        .trim()\n\n      // Get locale\n      if (!info) {\n        const { filePathRelative } = env\n        const relativePath = ensureLeadingSlash(filePathRelative ?? '')\n        const localePath = resolveLocalePath(options, relativePath)\n\n        // eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n        info = options[localePath]?.details\n      } else {\n        info = md.renderInline(info)\n      }\n\n      return `<details class=\"hint-container details\"><summary>${\n        info || 'Details'\n      }</summary>\\n`\n    },\n    closeRender: () => '</details>\\n',\n  })\n}\n","import type { MarkdownHintPluginLocaleConfig } from './options.js'\n\nexport const markdownHintPluginLocales: MarkdownHintPluginLocaleConfig = {\n  '/en/': {\n    important: 'Important',\n    info: 'Info',\n    note: 'Note',\n    tip: 'Tips',\n    warning: 'Warning',\n    caution: 'Caution',\n    details: 'Details',\n  },\n\n  '/zh/': {\n    important: '重要',\n    info: '相关信息',\n    note: '注',\n    tip: '提示',\n    warning: '注意',\n    caution: '警告',\n    details: '详情',\n  },\n\n  '/zh-tw/': {\n    important: '重要',\n    info: '相關信息',\n    note: '注',\n    tip: '提示',\n    warning: '注意',\n    caution: '警告',\n    details: '詳情',\n  },\n\n  '/de/': {\n    important: 'Wichtig',\n    info: 'Information',\n    note: 'Notiz',\n    tip: 'Tips',\n    warning: 'Warnung',\n    caution: 'Gefahr',\n    details: 'Details',\n  },\n\n  '/de-at/': {\n    important: 'Wichtig',\n    info: 'Information',\n    note: 'Note',\n    tip: 'Tips',\n    warning: 'Notiz',\n    caution: 'Warnung',\n    details: 'Details',\n  },\n\n  '/vi/': {\n    important: 'Quan trọng',\n    info: 'Thông tin',\n    note: 'Note',\n    tip: 'Tips',\n    warning: 'Lưu ý',\n    caution: 'Cẩn thận',\n    details: 'Chi tiết',\n  },\n\n  '/uk/': {\n    important: 'Важливо',\n    info: 'Інформація',\n    note: 'Note',\n    tip: 'Поради',\n    warning: 'Примітка',\n    caution: 'Увага',\n    details: 'Деталь',\n  },\n\n  '/ru/': {\n    important: 'Важно',\n    info: 'Инфо',\n    note: 'Заметка',\n    tip: 'Совет',\n    warning: 'Примечание',\n    caution: 'Предупреждение',\n    details: 'Подробности',\n  },\n\n  '/br/': {\n    important: 'Importante',\n    info: 'Informativo',\n    note: 'Note',\n    tip: 'Dicas',\n    warning: 'Avisos',\n    caution: 'Cuidado',\n    details: 'Detalhe',\n  },\n\n  '/pl/': {\n    important: 'Ważne',\n    info: 'Info',\n    note: 'Notatka',\n    tip: 'Porady',\n    warning: 'Notatka',\n    caution: 'Ostrzeżenie',\n    details: 'Dane',\n  },\n\n  '/sk/': {\n    important: 'Dôležité',\n    info: 'Info',\n    note: 'Poznámka',\n    tip: 'Tip',\n    warning: 'Upozornenie',\n    caution: 'Pozor',\n    details: 'Podrobnosti',\n  },\n\n  '/fr/': {\n    important: 'Important',\n    info: 'Info',\n    note: 'Note',\n    tip: 'Conseil',\n    warning: 'Note',\n    caution: 'Avertissement',\n    details: 'Details',\n  },\n\n  '/es/': {\n    important: 'Importante',\n    info: 'Información',\n    note: 'Nota',\n    tip: 'Consejos',\n    warning: 'Aviso',\n    caution: 'Advertencia',\n    details: 'Detalles',\n  },\n\n  '/ja/': {\n    important: '重要',\n    info: '関連情報',\n    note: '注',\n    tip: 'ヒント',\n    warning: '注意',\n    caution: '警告',\n    details: '詳細',\n  },\n\n  '/tr/': {\n    important: 'Önemli',\n    info: 'Bilgi',\n    note: 'Not',\n    tip: 'Tavsiye',\n    warning: 'Uyarı',\n    caution: 'Tehlike',\n    details: 'Detay',\n  },\n\n  '/ko/': {\n    important: '중요',\n    info: '정보',\n    note: '노트',\n    tip: '팁',\n    warning: '경고',\n    caution: '위험',\n    details: '세부사항',\n  },\n\n  '/fi/': {\n    important: 'Tärkeä',\n    info: 'Tietoa',\n    note: 'Huomautus',\n    tip: 'Vinkki',\n    warning: 'Varoitus',\n    caution: 'Vaara',\n    details: 'Yksityiskohdat',\n  },\n\n  '/hu/': {\n    important: 'Fontos',\n    info: 'Információ',\n    note: 'Megjegyzés',\n    tip: 'Tipp',\n    warning: 'Figyelem',\n    caution: 'Veszély',\n    details: 'Részletek',\n  },\n\n  '/id/': {\n    important: 'Penting',\n    info: 'Pemberitahuan',\n    note: 'Catatan',\n    tip: 'Tips',\n    warning: 'Penting',\n    caution: 'Peringatan',\n    details: 'Rincian',\n  },\n\n  '/nl/': {\n    important: 'Belangrijk',\n    info: 'Info',\n    note: 'Notitie',\n    tip: 'Tips',\n    warning: 'Notitie',\n    caution: 'Waarschuwing',\n    details: 'Details',\n  },\n}\n","import { getLocaleConfig } from '@vuepress/helper'\nimport type { Plugin } from 'vuepress/core'\nimport { getDirname, path } from 'vuepress/utils'\n\nimport { alert } from './alert.js'\nimport { hint } from './hint.js'\nimport { markdownHintPluginLocales } from './locales.js'\nimport type { MarkdownHintPluginOptions } from './options.js'\n\nconst PLUGIN_NAME = '@vuepress/plugin-markdown-hint'\n\nconst __dirname = getDirname(import.meta.url)\n\nexport const markdownHintPlugin = (\n  options: MarkdownHintPluginOptions,\n): Plugin => {\n  if (!options.alert && options.hint === false)\n    return {\n      name: PLUGIN_NAME,\n    }\n\n  return {\n    name: PLUGIN_NAME,\n\n    extendsMarkdown: (md, app) => {\n      const locale = getLocaleConfig({\n        app,\n        name: PLUGIN_NAME,\n        default: markdownHintPluginLocales,\n        config: options.locales,\n      })\n\n      if (options.alert) md.use(alert, locale)\n      if (options.hint !== false) md.use(hint, locale)\n    },\n\n    clientConfigFile:\n      options.injectStyles === false\n        ? undefined\n        : path.resolve(__dirname, '../client/config.js'),\n  }\n}\n"],"names":["alert","md","options","_alert","tokens","index","_options","env","type","relativePath","ensureLeadingSlash","localePath","resolveLocalePath","hint","name","container","info","filePathRelative","markdownHintPluginLocales","PLUGIN_NAME","__dirname","getDirname","markdownHintPlugin","app","locale","getLocaleConfig","path"],"mappings":"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"}