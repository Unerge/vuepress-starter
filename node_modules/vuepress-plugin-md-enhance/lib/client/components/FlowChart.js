import{wait as p,decodeData as c,LoadingIcon as w}from"@vuepress/helper/client";import{useEventListener as f,useDebounceFn as m}from"@vueuse/core";import{defineComponent as h,shallowRef as v,ref as i,computed as g,onMounted as y,h as s}from"vue";import"../styles/flowchart.scss";import{f as d}from"../index-D5Lp0y24.js";var C=h({name:"FlowChart",props:{code:{type:String,required:!0},id:{type:String,required:!0},preset:{type:String,default:"vue"}},setup(r){let o=null;const u=v(),n=i(!0),a=i(1),t=g(()=>d[r.preset]||(console.warn(`[md-enhance:flowchart] Unknown preset: ${r.preset}`),d.vue)),l=e=>e<419?.8:e>1280?1:.9;return y(()=>{Promise.all([import("flowchart.ts"),p(MARKDOWN_ENHANCE_DELAY)]).then(([{parse:e}])=>{o=e(c(r.code)),a.value=l(window.innerWidth),n.value=!1,o.draw(r.id,{...t.value,scale:a.value})}),f("resize",m(()=>{if(o){const e=l(window.innerWidth);a.value!==e&&(a.value=e,o.draw(r.id,{...t.value,scale:e}))}},100))}),()=>[n.value?s(w,{class:"flowchart-loading",height:192}):null,s("div",{ref:u,class:["flowchart-wrapper",r.preset],id:r.id,style:{display:n.value?"none":"block"}})]}});export{C as default};
//# sourceMappingURL=FlowChart.js.map
