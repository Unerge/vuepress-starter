import{uml as kr}from"@mdit/plugin-uml";var m=32768,Pr=0,Gr=1,Rr=2,Tr=!0,Ur=32768,jr=64,xn=1024*8,er=2*m,A=3,rn=258,qr=16,qn=8192,tr=13,fr=qn,Bn=1<<tr,Dn=Bn-1,or=m-1,fn=0,Br=4096,yn=rn+A+1,on=m-yn,Z=1,Q=15,Dr=7,En=29,An=256,ir=256,M=An+1+En,k=30,ln=19,lr=16,ar=17,cr=18,gn=2*M+1,Fn=parseInt((tr+A-1)/A),V,v,pn,Hn,Y=null,g,x,Cn,c,Kn,Ln,N,O,P,j,G,W,ur,an,s,$,u,cn,q,h,dr,Mn,J,sr,R,B,D,nn,y,I,S,E,p,w,F,en,z,un,dn,Nn,bn,$n,H,In,On,sn,Sn,tn,zn,kn,Wn,Xn=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],hn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],Er=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],hr=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Zn=[new T(0,0,0,0),new T(4,4,8,4),new T(4,5,16,8),new T(4,6,32,32),new T(4,4,16,16),new T(8,16,32,32),new T(8,16,128,128),new T(8,32,128,256),new T(32,128,258,1024),new T(32,258,258,4096)];function wn(){this.fc=0,this.dl=0}function Qn(){this.dyn_tree=null,this.static_tree=null,this.extra_bits=null,this.extra_base=0,this.elems=0,this.max_length=0,this.max_code=0}function T(n,r,e,t){this.good_length=n,this.max_lazy=r,this.nice_length=e,this.max_chain=t}function Fr(){this.next=null,this.len=0,this.ptr=new Array(xn),this.off=0}function Hr(n){var r;if(J=n,Hn=!1,q=!1,Y==null){for(V=v=pn=null,Y=new Array(xn),c=new Array(er),Kn=new Array(fr),Ln=new Array(Ur+jr),N=new Array(1<<qr),R=new Array(gn),r=0;r<gn;r++)R[r]=new wn;for(B=new Array(2*k+1),r=0;r<2*k+1;r++)B[r]=new wn;for(D=new Array(M+2),r=0;r<M+2;r++)D[r]=new wn;for(nn=new Array(k),r=0;r<k;r++)nn[r]=new wn;for(y=new Array(2*ln+1),r=0;r<2*ln+1;r++)y[r]=new wn;I=new Qn,S=new Qn,E=new Qn,p=new Array(Q+1),w=new Array(2*M+1),z=new Array(2*M+1),un=new Array(rn-A+1),dn=new Array(512),Nn=new Array(En),bn=new Array(k),$n=new Array(parseInt(qn/8))}}function Kr(n){n.next=V,V=n}function Lr(){var n;return V!=null?(n=V,V=V.next):n=new Fr,n.next=null,n.len=n.off=0,n}function wr(n){return N[m+n]}function _r(n,r){return N[m+n]=r}function Pn(n){Y[x+g++]=n,x+g==xn&&Jr()}function Gn(n){n&=65535,x+g<xn-2?(Y[x+g++]=n&255,Y[x+g++]=n>>>8):(Pn(n&255),Pn(n>>>8))}function Rn(){G=(G<<Fn^c[u+A-1]&255)&Dn,W=wr(G),N[u&or]=W,_r(G,u)}function K(n,r){C(r[n].fc,r[n].dl)}function mr(n){return(n<256?dn[n]:dn[256+(n>>7)])&255}function vr(n,r,e){return n[r].fc<n[e].fc||n[r].fc==n[e].fc&&z[r]<=z[e]}function xr(n,r,e){var t;for(t=0;t<e&&Wn<kn.length;t++)n[r+t]=kn.charCodeAt(Wn++)&255;return t}function Mr(){var n;for(n=0;n<Bn;n++)N[m+n]=0;if(Mn=Zn[J].max_lazy,sr=Zn[J].good_length,dr=Zn[J].max_chain,u=0,j=0,h=xr(c,0,2*m),h<=0){q=!0,h=0;return}for(q=!1;h<yn&&!q;)Vn();for(G=0,n=0;n<A-1;n++)G=(G<<Fn^c[n]&255)&Dn}function yr(n){var r=dr,e=u,t,f,o=$,l=u>on?u-on:fn,a=u+rn,i=c[e+o-1],_=c[e+o];$>=sr&&(r>>=2);do if(t=n,!(c[t+o]!=_||c[t+o-1]!=i||c[t]!=c[e]||c[++t]!=c[e+1])){e+=2,t++;do;while(c[++e]==c[++t]&&c[++e]==c[++t]&&c[++e]==c[++t]&&c[++e]==c[++t]&&c[++e]==c[++t]&&c[++e]==c[++t]&&c[++e]==c[++t]&&c[++e]==c[++t]&&e<a);if(f=rn-(a-e),e=a-rn,f>o){if(cn=n,o=f,Tr&&f>=rn)break;i=c[e+o-1],_=c[e+o]}}while((n=N[n&or])>l&&--r!=0);return o}function Vn(){var n,r,e=er-h-u;if(e==-1)e--;else if(u>=m+on){for(n=0;n<m;n++)c[n]=c[n+m];for(cn-=m,u-=m,j-=m,n=0;n<Bn;n++)r=wr(n),_r(n,r>=m?r-m:fn);for(n=0;n<m;n++)r=N[n],N[n]=r>=m?r-m:fn;e+=m}q||(n=xr(c,u+h,e),n<=0?q=!0:h+=n)}function Nr(){for(;h!=0&&v==null;){var n;if(Rn(),W!=fn&&u-W<=on&&(s=yr(W),s>h&&(s=h)),s>=A)if(n=_n(u-cn,s-A),h-=s,s<=Mn){s--;do u++,Rn();while(--s!=0);u++}else u+=s,s=0,G=c[u]&255,G=(G<<Fn^c[u+1]&255)&Dn;else n=_n(0,c[u]&255),h--,u++;for(n&&(Tn(0),j=u);h<yn&&!q;)Vn()}}function Or(){for(;h!=0&&v==null;){if(Rn(),$=s,ur=cn,s=A-1,W!=fn&&$<Mn&&u-W<=on&&(s=yr(W),s>h&&(s=h),s==A&&u-cn>Br&&s--),$>=A&&s<=$){var n;n=_n(u-1-ur,$-A),h-=$-1,$-=2;do u++,Rn();while(--$!=0);an=0,s=A-1,u++,n&&(Tn(0),j=u)}else an!=0?(_n(0,c[u-1]&255)&&(Tn(0),j=u),u++,h--):(an=1,u++,h--);for(;h<yn&&!q;)Vn()}}function Wr(){q||(O=0,P=0,Zr(),Mr(),v=null,g=0,x=0,J<=3?($=A-1,s=0):(s=A-1,an=0),Cn=!1)}function Xr(n,r,e){var t;return!Hn&&(Wr(),Hn=!0,h==0)?(Cn=!0,0):(t=Ar(n,r,e))==e?e:Cn?t:(J<=3?Nr():Or(),h==0&&(an!=0&&_n(0,c[u-1]&255),Tn(1),Cn=!0),t+Ar(n,t+r,e-t))}function Ar(n,r,e){var t,f,o;for(t=0;v!=null&&t<e;){for(f=e-t,f>v.len&&(f=v.len),o=0;o<f;o++)n[r+t+o]=v.ptr[v.off+o];if(v.off+=f,v.len-=f,t+=f,v.len==0){var l;l=v,v=v.next,Kr(l)}}if(t==e)return t;if(x<g){for(f=e-t,f>g-x&&(f=g-x),o=0;o<f;o++)n[r+t+o]=Y[x+o];x+=f,t+=f,g==x&&(g=x=0)}return t}function Zr(){var n,r,e,t,f;if(nn[0].dl==0){for(I.dyn_tree=R,I.static_tree=D,I.extra_bits=Xn,I.extra_base=An+1,I.elems=M,I.max_length=Q,I.max_code=0,S.dyn_tree=B,S.static_tree=nn,S.extra_bits=hn,S.extra_base=0,S.elems=k,S.max_length=Q,S.max_code=0,E.dyn_tree=y,E.static_tree=null,E.extra_bits=Er,E.extra_base=0,E.elems=ln,E.max_length=Dr,E.max_code=0,e=0,t=0;t<En-1;t++)for(Nn[t]=e,n=0;n<1<<Xn[t];n++)un[e++]=t;for(un[e-1]=t,f=0,t=0;t<16;t++)for(bn[t]=f,n=0;n<1<<hn[t];n++)dn[f++]=t;for(f>>=7;t<k;t++)for(bn[t]=f<<7,n=0;n<1<<hn[t]-7;n++)dn[256+f++]=t;for(r=0;r<=Q;r++)p[r]=0;for(n=0;n<=143;)D[n++].dl=8,p[8]++;for(;n<=255;)D[n++].dl=9,p[9]++;for(;n<=279;)D[n++].dl=7,p[7]++;for(;n<=287;)D[n++].dl=8,p[8]++;for(pr(D,M+1),n=0;n<k;n++)nn[n].dl=5,nn[n].fc=Ir(n,5);gr()}}function gr(){var n;for(n=0;n<M;n++)R[n].fc=0;for(n=0;n<k;n++)B[n].fc=0;for(n=0;n<ln;n++)y[n].fc=0;R[ir].fc=1,tn=zn=0,H=In=On=0,sn=0,Sn=1}function Yn(n,r){for(var e=w[r],t=r<<1;t<=F&&(t<F&&vr(n,w[t+1],w[t])&&t++,!vr(n,e,w[t]));)w[r]=w[t],r=t,t<<=1;w[r]=e}function Qr(n){var r=n.dyn_tree,e=n.extra_bits,t=n.extra_base,f=n.max_code,o=n.max_length,l=n.static_tree,a,i,_,d,b,U,L=0;for(d=0;d<=Q;d++)p[d]=0;for(r[w[en]].dl=0,a=en+1;a<gn;a++)i=w[a],d=r[r[i].dl].dl+1,d>o&&(d=o,L++),r[i].dl=d,!(i>f)&&(p[d]++,b=0,i>=t&&(b=e[i-t]),U=r[i].fc,tn+=U*(d+b),l!=null&&(zn+=U*(l[i].dl+b)));if(L!=0){do{for(d=o-1;p[d]==0;)d--;p[d]--,p[d+1]+=2,p[o]--,L-=2}while(L>0);for(d=o;d!=0;d--)for(i=p[d];i!=0;)_=w[--a],!(_>f)&&(r[_].dl!=d&&(tn+=(d-r[_].dl)*r[_].fc,r[_].fc=d),i--)}}function pr(n,r){var e=new Array(Q+1),t=0,f,o;for(f=1;f<=Q;f++)t=t+p[f-1]<<1,e[f]=t;for(o=0;o<=r;o++){var l=n[o].dl;l!=0&&(n[o].fc=Ir(e[l]++,l))}}function Jn(n){var r=n.dyn_tree,e=n.static_tree,t=n.elems,f,o,l=-1,a=t;for(F=0,en=gn,f=0;f<t;f++)r[f].fc!=0?(w[++F]=l=f,z[f]=0):r[f].dl=0;for(;F<2;){var i=w[++F]=l<2?++l:0;r[i].fc=1,z[i]=0,tn--,e!=null&&(zn-=e[i].dl)}for(n.max_code=l,f=F>>1;f>=1;f--)Yn(r,f);do f=w[Z],w[Z]=w[F--],Yn(r,Z),o=w[Z],w[--en]=f,w[--en]=o,r[a].fc=r[f].fc+r[o].fc,z[f]>z[o]+1?z[a]=z[f]:z[a]=z[o]+1,r[f].dl=r[o].dl=a,w[Z]=a++,Yn(r,Z);while(F>=2);w[--en]=w[Z],Qr(n),pr(r,l)}function Cr(n,r){var e,t=-1,f,o=n[0].dl,l=0,a=7,i=4;for(o==0&&(a=138,i=3),n[r+1].dl=65535,e=0;e<=r;e++)f=o,o=n[e+1].dl,!(++l<a&&f==o)&&(l<i?y[f].fc+=l:f!=0?(f!=t&&y[f].fc++,y[lr].fc++):l<=10?y[ar].fc++:y[cr].fc++,l=0,t=f,o==0?(a=138,i=3):f==o?(a=6,i=3):(a=7,i=4))}function br(n,r){var e,t=-1,f,o=n[0].dl,l=0,a=7,i=4;for(o==0&&(a=138,i=3),e=0;e<=r;e++)if(f=o,o=n[e+1].dl,!(++l<a&&f==o)){if(l<i)do K(f,y);while(--l!=0);else f!=0?(f!=t&&(K(f,y),l--),K(lr,y),C(l-3,2)):l<=10?(K(ar,y),C(l-3,3)):(K(cr,y),C(l-11,7));l=0,t=f,o==0?(a=138,i=3):f==o?(a=6,i=3):(a=7,i=4)}}function Vr(){var n;for(Cr(R,I.max_code),Cr(B,S.max_code),Jn(E),n=ln-1;n>=3&&y[hr[n]].dl==0;n--);return tn+=3*(n+1)+5+5+4,n}function Yr(n,r,e){var t;for(C(n-257,5),C(r-1,5),C(e-4,4),t=0;t<e;t++)C(y[hr[t]].dl,3);br(R,n-1),br(B,r-1)}function Tn(n){var r,e,t,f;if(f=u-j,$n[On]=sn,Jn(I),Jn(S),t=Vr(),r=tn+3+7>>3,e=zn+3+7>>3,e<=r&&(r=e),f+4<=r&&j>=0){var o;for(C((Pr<<1)+n,3),Sr(),Gn(f),Gn(~f),o=0;o<f;o++)Pn(c[j+o])}else e==r?(C((Gr<<1)+n,3),$r(D,nn)):(C((Rr<<1)+n,3),Yr(I.max_code+1,S.max_code+1,t+1),$r(R,B));gr(),n!=0&&Sr()}function _n(n,r){if(Ln[H++]=r,n==0?R[r].fc++:(n--,R[un[r]+An+1].fc++,B[mr(n)].fc++,Kn[In++]=n,sn|=Sn),Sn<<=1,H&7||($n[On++]=sn,sn=0,Sn=1),J>2&&!(H&4095)){var e=H*8,t=u-j,f;for(f=0;f<k;f++)e+=B[f].fc*(5+hn[f]);if(e>>=3,In<parseInt(H/2)&&e<parseInt(t/2))return!0}return H==qn-1||In==fr}function $r(n,r){var e,t,f=0,o=0,l=0,a=0,i,_;if(H!=0)do f&7||(a=$n[l++]),t=Ln[f++]&255,a&1?(i=un[t],K(i+An+1,n),_=Xn[i],_!=0&&(t-=Nn[i],C(t,_)),e=Kn[o++],i=mr(e),K(i,r),_=hn[i],_!=0&&(e-=bn[i],C(e,_))):K(t,n),a>>=1;while(f<H);K(ir,n)}var nr=16;function C(n,r){P>nr-r?(O|=n<<P,Gn(O),O=n>>nr-P,P+=r-nr):(O|=n<<P,P+=r)}function Ir(n,r){var e=0;do e|=n&1,n>>=1,e<<=1;while(--r>0);return e>>1}function Sr(){P>8?Gn(O):P>0&&Pn(O),O=0,P=0}function Jr(){if(g!=0){var n,r;for(n=Lr(),v==null?v=pn=n:pn=pn.next=n,n.len=g-x,r=0;r<n.len;r++)n.ptr[r]=Y[x+r];g=x=0}}function ne(n,r){var e,t,f,o;for(kn=n,Wn=0,Hr(r),t=new Array(1024),e="";(f=Xr(t,0,t.length))>0;)for(o=0;o<f;o++)e+=String.fromCharCode(t[o]);return kn=null,e}function re(n){for(var r="",e=0;e<n.length;e+=3)e+2==n.length?r+=rr(n.charCodeAt(e),n.charCodeAt(e+1),0):e+1==n.length?r+=rr(n.charCodeAt(e),0,0):r+=rr(n.charCodeAt(e),n.charCodeAt(e+1),n.charCodeAt(e+2));return r}function rr(n,r,e){var t=n>>2,f=(n&3)<<4|r>>4,o=(r&15)<<2|e>>6,l=e&63,a="";return a+=Un(t&63),a+=Un(f&63),a+=Un(o&63),a+=Un(l&63),a}function Un(n){return n<10?String.fromCharCode(48+n):(n-=10,n<26?String.fromCharCode(65+n):(n-=26,n<26?String.fromCharCode(97+n):(n-=26,n==0?"-":n==1?"_":"?")))}const ee=(n,{type:r="uml",name:e="uml",open:t=`start${e}`,close:f=`end${e}`,fence:o=e,format:l="svg",server:a="https://www.plantuml.com/plantuml",srcGetter:i=d=>`${a}/${l}/${re(ne(unescape(encodeURIComponent(`@start${e}
${d.trim()}
@end${e}`)),9))}`,render:_=(d,b,U,L,mn)=>{const X=d[b],{content:vn,info:jn="plantuml diagram"}=X;return X.tag="img",X.attrPush(["src",i(vn)]),X.attrPush(["alt",jn]),mn.renderToken(d,b,U)}}={})=>{if(r==="uml")n.use(kr,{name:e,open:t,close:f,render:_});else{const d=n.renderer.rules.fence;n.renderer.rules.fence=(b,U,L,mn,X)=>{const vn=b[U],[jn,zr]=vn.info.split(" ",2);return jn===o?(vn.info=zr,_(b,U,L,mn,X)):d(b,U,L,mn,X)}}};export{ee as plantuml};
//# sourceMappingURL=index.js.map
